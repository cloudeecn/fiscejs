var FyPortable,FyConfig={littleEndian:void 0,maxObjects:16384,maxThreads:16,gcIdv:2E4,gcForceIdv:12E4,stackSize:16384,debugMode:!0,verboseMode:!1};
(function(a){Date.now||(Date.now=function(){return Number(new Date)});a.performance||(a.performance={});performance.now||(performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}());a.Math.imul||(console.log("Polyfill Math.imul"),a.Math.imul=function(c,a){var b=c&65535,d=a&65535;return b*d+((c>>>16&65535)*d+b*(a>>>16&65535)<<16>>>0)|0});Object.preventExtensions||(console.log("Polyfill Object.preventExtensions"),
Object.preventExtensions=function(c){});"function"!=typeof String.prototype.startsWith&&(console.log("Polyfill String.startsWith"),String.prototype.startsWith=function(c){return this.slice(0,c.length)==c});"function"!=typeof String.prototype.endsWith&&(console.log("Polyfill String.endsWith"),String.prototype.endsWith=function(c){return this.slice(-c.length)==c});a=new Float64Array(1);var b=new Int32Array(a.buffer);a[0]=1;b[0]?(console.log("Big endian"),FyConfig.littleEndian=!1):(console.log("Little endian"),
FyConfig.littleEndian=!0);a=new ArrayBuffer(8);var c=new Int32Array(a),d=new Float32Array(a),e=new Float64Array(a);a=function(){Object.preventExtensions(this)};a.prototype.floatToIeee32=function(a){d[0]=a;return c[0]};a.prototype.ieee32ToFloat=function(a){c[0]=a;return d[0]};FyConfig.littleEndian?(a.prototype.doubleToIeee64=function(a,b,d){e[0]=a;b[d]=c[1];b[d+1]=c[0];return b},a.prototype.ieee64ToDouble=function(a,b){c[1]=a[b];c[0]=a[b+1];return e[0]}):(a.prototype.doubleToIeee64=function(a,b,d){e[0]=
a;b[d]=c[0];b[d+1]=c[1];return b},a.prototype.ieee64ToDouble=function(a,b){c[0]=a[b];c[1]=a[b+1];return e[0]});a.prototype.doubleToLong=function(a,c,b){c[b]=a/4294967296|0;c[b+1]=a|0};a.prototype.dcmpg=function(a,c){var b=a-c;return b!==b?1:0<b?1:0===b?0:-1};a.prototype.dcmpl=function(a,c){var b=a-c;return b!==b?-1:0<b?1:0===b?0:-1};a.prototype.getLongOps=function(a){return FyCreateLongOps(this,0,a)};a.prototype.now=function(){return performance.now()};FyPortable=new a})(function(){return this}.call());
var __FyLongOpsAsmString;function FyCreateLongOps(a,b,c){Function||(b=0);switch(b){case 0:return new __FyLongOps(a,c);case 1:return(new Function("a","b","c","return ("+__FyLongOpsAsmString.replace(/\#\#use asm\#\#/,"use asm")+"(a,b,c))"))(a,void 0,c.buffer);case 2:return(new Function("a","b","c","return ("+__FyLongOpsAsmString.replace(/\#\#use asm\#\#/,"")+"(a,b,c))"))(a,void 0,c.buffer)}}
function __FyLongOpAsm(a,b,c){function d(a,c,b){a|=0;return(k[a>>2]|0)==(c|0)&(k[a+4>>2]|0)==(b|0)|0}function e(a,c){a|=0;c|=0;k[c>>2]=k[a>>2];k[c+4>>2]=k[a+4>>2]}function g(a,c,b){a|=0;k[a>>2]=c|0;k[a+4>>2]=b|0}function f(a){a|=0;var c=0,c=+(k[a+4>>2]|0);0>c&&(c=+c+4294967296);return+(4294967296*+(k[a>>2]|0)+c)}function h(a,c){a|=0;c=+c;c!=c|c==1/0?g(a,0,0):c<=-E?g(a,-2147483648,0):c+1>=E?g(a,2147483647,-1):0>c?(h(a,-c),n(a>>2)):g(a,~~(c/4294967296),~~(c%4294967296))}function l(a,c){var b=0,e=0,
b=(a|0)<<2|0,e=(c|0)<<2|0;return d(b,k[e>>2]|0,k[e+4>>2]|0)|0?0:(k[b>>2]|0)>(k[e>>2]|0)?1:(k[b>>2]|0)<(k[e>>2]|0)?-1:0>(k[b+4>>2]^k[e+4>>2]|0)?0>(k[b+4>>2]|0)?1:-1:(k[b+4>>2]&2147483647|0)>(k[e+4>>2]&2147483647|0)?1:-1}function n(a){a|=0;k[a<<2>>2]=~k[a<<2>>2];k[a+1<<2>>2]=~k[a+1<<2>>2];p(a)}function p(a){a|=0;k[a+1<<2>>2]=(k[a+1<<2>>2]|0)+1|0;k[a<<2>>2]=(k[a<<2>>2]|0)+(!(k[a+1<<2>>2]|0)&1)|0}function m(a,c){a|=0;c|=0;var b=0,b=(k[a+1<<2>>2]&65535)+(k[c+1<<2>>2]&65535)|0;k[a+1<<2>>2]=k[a+1<<2>>2]&
4294901760|b&65535|0;b=(b>>>16)+(k[a+1<<2>>2]>>>16)+(k[c+1<<2>>2]>>>16)|0;k[a+1<<2>>2]=k[a+1<<2>>2]&65535|b<<16|0;b=(b>>>16)+(k[a<<2>>2]&65535)+(k[c<<2>>2]&65535)|0;k[a<<2>>2]=k[a<<2>>2]&4294901760|b&65535|0;b=(b>>>16)+(k[a<<2>>2]>>>16)+(k[c<<2>>2]>>>16)|0;k[a<<2>>2]=k[a<<2>>2]&65535|b<<16|0}function r(a,c){a|=0;c|=0;n(a);m(a,c);n(a)}function s(a,c){a|=0;c|=0;var b=0,e=0,z=0,f=0,v=0,h=0,D=0,l=0,F=0,C=0,B=0,w=e=0,t=0,m=0,q=0,b=a<<2|0,e=c<<2|0;d(b,0,0)|0|d(e,0,0)|0?(k[b>>2]=0,k[b+4>>2]=0):d(b,-2147483648,
0)|0?k[e+4>>2]&1|0||(k[b>>2]=0,k[b+4>>2]=0):d(e,-2147483648,0)|0?(k[b>>2]=k[b+4>>2]&1|0?2147483648:0,k[b+4>>2]=0):(1==k[b>>2]>>>31|0&&(z=1-z|0,n(a)),1==k[e>>2]>>>31|0&&(z=1-z|0,f=1,n(c)),v=k[b>>2]>>>16|0,h=k[b>>2]&65535|0,D=k[b+4>>2]>>>16|0,l=k[b+4>>2]&65535|0,F=k[e>>2]>>>16|0,C=k[e>>2]&65535|0,B=k[e+4>>2]>>>16|0,e=k[e+4>>2]&65535|0,q=q+(u(l,e)|0)|0,m=m+(q>>>16)|0,q=q&65535|0,m=m+(u(D,e)|0)|0,t=t+(m>>>16)|0,m=(m&65535|0)+(u(l,B)|0)|0,t=t+(m>>>16)|0,m=m&65535|0,t=t+(u(h,e)|0)|0,w=w+(t>>>16)|0,t=(t&
65535|0)+(u(D,B)|0)|0,w=w+(t>>>16)|0,t=t&65535|0,t=t+(u(l,C)|0)|0,w=w+(t>>>16)|0,t=t&65535|0,w=w+(u(v,e)|0)+(u(h,B)|0)+(u(D,C)|0)+(u(l,F)|0)|0,g(b,(w&65535|0)<<16|t|0,m<<16|q|0),z&&n(a),f&&n(c))}function q(a,c){a|=0;c|=0;var b=0,p=0,u=0,y=0,x=b=0,x=0,b=a<<2|0,p=c<<2|0;0==+z&&(z=+A(2));if(d(p,0,0)|0)g(b,-1,-1);else if(d(b,-2147483648,0)|0)d(p,0,1)|0|d(p,-1,-1)|0||(d(p,-2147483648,0)|0?g(b,0,1):(k[b>>2]=-1073741824,q(a,c),u=a|0,y=0,y=u<<2|0,k[y>>2]=k[y>>2]<<1|k[y+4>>2]>>>31|0,k[y+4>>2]=k[y+4>>2]<<1|
0,d(b,0,0)|0?1==(k[p>>2]>>>31|0)?g(b,0,1):g(b,-1,-1):(g(F,-2147483648,0),e(b,C),s(a,c),r(v,a),q(v,c),m(D,v),e(C,b))));else if(d(p,-2147483648,0)|0)g(b,0,0);else{0>(k[b>>2]|0)&&(u=1-u|0,n(a));0>(k[p>>2]|0)&&(u=1-u|0,y=1,n(c));e(b,B);for(g(b,0,0);0<=(l(w,c)|0);){b=1;x=+H(+f(B)/+f(p));b=+b;x=+x;b=+ +(b>x?b:x);x=+I(+A(b)/z);x=48>=x?1:+J(2,x-48);h(t,b);e(t,K);for(s(G,c);0>(k[K>>2]|0)|0<(l(G,w)|0);)b-=x,h(t,b),e(t,K),s(G,c);d(t,0,0)|0&&g(t,0,1);m(a,L);r(w,G)}u&&n(a);y&&n(c)}}"##use asm##";var k=new a.Int32Array(c),
u=a.Math.imul,H=a.Math.floor,I=a.Math.ceil,A=a.Math.log,J=a.Math.pow,E=9223372036854775E3,z=0,v=0,F=0,D=2,C=8,w=4,B=16,L=6,t=24,G=8,K=32;return{compare:l,cmp:function(a,c){a|=0;var b=0,d=0,b=a<<2|0,d=l(a,c|0)|0;switch(d|0){case -1:k[b>>2]=-1;k[b+4>>2]=-1;break;case 0:k[b>>2]=0;k[b+4>>2]=0;break;case 1:k[b>>2]=0;k[b+4>>2]=1;break;default:k[b>>2]=-1,k[b+4>>2]=1}},not:function(a){a|=0;k[a<<2>>2]=~k[a<<2>>2];k[a+1<<2>>2]=~k[a+1<<2>>2]},neg:n,add1:p,add:m,sub:r,mul:s,div:q,rem:function(a,c){a|=0;c|=0;
d(c<<2,0,0)|0?g(a<<2,-1,-1):(e(a<<2,40),q(10,c),s(10,c),r(a,10))},shl:function(a,c){c|=0;var b=0,b=(a|0)<<2;64<=(c|0)?g(b,0,0):32<=(c|0)?(k[b>>2]<<=c-32,k[b+4>>2]=0):(k[b>>2]=k[b>>2]<<c|k[b+4>>2]>>>32-c,k[b+4>>2]<<=c)},shr:function(a,c){a|=0;c|=0;var b=0,b=a<<2;64<=(c|0)?k[b+4>>2]=k[b>>2]>>=31:32<=(c|0)?(k[b+4>>2]=k[b>>2]>>c-32,k[b>>2]>>=31):(k[b+4>>2]=k[b+4>>2]>>>c|k[b>>2]<<32-a,k[b>>2]>>=c)},ushr:function(a,c){a|=0;c|=0;var b=0,b=a<<2;64<=(c|0)?g(b,0,0):32<=(c|0)?(k[b+4>>2]=k[b>>2]>>>c-32,k[b>>
2]=0):(k[b+4>>2]=k[b+4>>2]>>>c|k[b>>2]<<32-a,k[b>>2]>>>=c)},longFromNumber:function(a,c){h((a|0)<<2|0,+c)},longToNumber:function(a){return+f((a|0)<<2|0)}}}__FyLongOpsAsmString=__FyLongOpAsm.toString();function __FyLongOps(a,b){this.global=a;this.stack=b;this.TWO_PWR_63_DBL_=9223372036854775E3;this.tmp0=0;this.tmp1=2;this.tmp2=4;this.tmp3=6;this.tmp4=8;this.tmp5=10}__FyLongOps.prototype.fmax=function(a,b){return a>b?a:b};
__FyLongOps.prototype.not=function(a){var b=this.stack;b[a]=~b[a];b[a+1]=~b[a+1]};__FyLongOps.prototype.neg=function(a){var b=this.stack;b[a]=~b[a];b[a+1]=~b[a+1];this.add1(a)};__FyLongOps.prototype.add1=function(a){var b=this.stack;-1===(b[a+1]|0)?(b[a+1]=0,b[a]++):b[a+1]++};__FyLongOps.prototype.longToNumber=function(a){return 4294967296*this.stack[a]+(this.stack[a+1]>>>0)};
__FyLongOps.prototype.longFromNumber=function(a,b){var c=this.stack;b!=b|b==1/0?c[a]=c[a+1]=0:b<=-this.TWO_PWR_63_DBL_?(c[a]=2147483648,c[a+1]=0):b+1>=this.TWO_PWR_63_DBL_?(c[a]=2147483647,c[a+1]=4294967295):0>b?(this.longFromNumber(a,-b),this.neg(a)):(c[a]=b/4294967296>>0,c[a+1]=b%4294967296>>0)};__FyLongOps.prototype.compare=function(a,b){var c=this.stack;return c[a]>c[b]?1:c[a]<c[b]?-1:c[a+1]==c[b+1]?0:c[a+1]>>>0>c[b+1]>>>0?1:-1};
__FyLongOps.prototype.cmp=function(a,b){var c=this.stack,d=this.compare(a,b);switch(d){case -1:c[a]=-1;c[a+1]=-1;break;case 0:c[a]=0;c[a+1]=0;break;case 1:c[a]=0;c[a+1]=1;break;default:throw"err! "+d;}};__FyLongOps.prototype.add=function(a,b){var c=this.stack,d=(c[a+1]>>>0)+(c[b+1]>>>0);c[a+1]=d|0;c[a]=(d/4294967296>>0)+c[a]+c[b]|0};__FyLongOps.prototype.sub=function(a,b){this.neg(a);this.add(a,b);this.neg(a)};
__FyLongOps.prototype.mul=function(a,b){var c=this.stack,d=0,e=0;0==(c[a]|0)&0==(c[a+1]|0)|0==(c[b]|0)&0==(c[b+1]|0)&&(c[a]=0,c[a+1]=0);if(-2147483648==(c[a]|0)&0==(c[a+1]|0))0==(c[b+1]&1|0)&&(c[a]=0,c[a+1]=0);else if(-2147483648==(c[b]|0)&0==(c[b+1]|0))c[a]=0==(c[a+1]&1|0)?0:2147483648,c[a+1]=0;else{1==c[a]>>>31|0&&(d=1-d|0,this.neg(a));1==c[b]>>>31|0&&(d=1-d|0,e=1,this.neg(b));var g=c[a]>>>16,f=c[a]&65535,h=c[a+1]>>>16,l=c[a+1]&65535,n=c[b]>>>16,p=c[b]&65535,m=c[b+1]>>>16,r=c[b+1]&65535,s,q,k,u;
u=0+l*r;k=0+(u>>>16);k+=h*r;q=0+(k>>>16);k=(k&65535)+l*m;q+=k>>>16;k&=65535;q+=f*r;s=0+(q>>>16);q=(q&65535)+h*m;s+=q>>>16;q&=65535;q+=l*p;s+=q>>>16;q&=65535;s=s+(g*r+f*m+h*p+l*n)&65535;c[a]=s<<16|q|0;c[a+1]=k<<16|u&65535|0;d&&this.neg(a);e&&this.neg(b)}};
__FyLongOps.prototype.div=function(a,b){var c=this.stack,d=0,e=0,g=0,f=0,f=0;if(0==c[b]&&0==c[b+1])c[a]=-1,c[a+1]=-1;else if(-2147483648==c[a]&&0==c[a+1])0==c[b]&&1==c[b+1]||-1==c[b]&&-1==c[b+1]||(-2147483648==c[b]&&0==c[b+1]?(c[a]=0,c[a+1]=1):(c[a]=-1073741824,this.div(a,b),c[a]=(c[a]<<1)+(c[a+1]>>>31),c[a+1]<<=1,0==c[a]&&0==c[a+1]?0>c[b]?(c[a]=0,c[a+1]=1):(c[a]=-1,c[a+1]=-1):(c[this.tmp0]=-2147483648,c[this.tmp0+1]=0,c[this.tmp1]=c[a],c[this.tmp1+1]=c[a+1],this.mul(a,b),this.sub(this.tmp0,a),this.div(this.tmp0,
b),this.add(this.tmp1,this.tmp0),c[a]=c[this.tmp1],c[a+1]=c[this.tmp1+1])));else if(-2147483648==c[b]&&0==c[b+1])c[a]=0,c[a+1]=0;else{0>c[a]&&(d=1-d,this.neg(a));0>c[b]&&(d=1-d,e=!0,this.neg(b));c[this.tmp2]=c[a];c[this.tmp2+1]=c[a+1];c[a]=0;for(c[a+1]=0;0<=this.compare(this.tmp2,b);){g=this.fmax(1,Math.floor(this.longToNumber(this.tmp2)/this.longToNumber(b)));f=Math.ceil(Math.log(g)/Math.LN2);f=48>=f?1:Math.pow(2,f-48);this.longFromNumber(this.tmp3,g);c[this.tmp4]=c[this.tmp3];c[this.tmp4+1]=c[this.tmp3+
1];for(this.mul(this.tmp4,b);0>c[this.tmp4]||0<this.compare(this.tmp4,this.tmp2);)g-=f,this.longFromNumber(this.tmp3,g),c[this.tmp4]=c[this.tmp3],c[this.tmp4+1]=c[this.tmp3+1],this.mul(this.tmp4,b);0==c[this.tmp3]&&0==c[this.tmp3+1]&&(c[this.tmp3+1]=1);this.add(a,this.tmp3);this.sub(this.tmp2,this.tmp4)}d&&this.neg(a);e&&this.neg(b)}};
__FyLongOps.prototype.rem=function(a,b){this.stack[this.tmp5]=this.stack[a];this.stack[this.tmp5+1]=this.stack[a+1];0==this.stack[b]&&0==this.stack[b+1]&&(this.stack[a]=-1,this.stack[a+1]=-1);this.div(this.tmp5,b);this.mul(this.tmp5,b);this.sub(a,this.tmp5)};__FyLongOps.prototype.shl=function(a,b){var c=this.stack;64<=b?c[a]=c[a+1]=0:32<b?(c[a]=c[a+1]<<b-32,c[a+1]=0):(c[a]=c[a]<<b|c[a+1]>>>32-b,c[a+1]<<=b)};
__FyLongOps.prototype.shr=function(a,b){var c=this.stack;64<=b?c[a+1]=c[a]>>=31:32<=b?(c[a+1]=c[a]>>b-32,c[a]>>=31):(c[a+1]=c[a+1]>>>b|c[a]<<32-a,c[a]>>=b)};__FyLongOps.prototype.ushr=function(a,b){var c=this.stack;64<=b?c[a]=c[a+1]=0:32<=b?(c[a+1]=c[a]>>>b-32,c[a]=0):(c[a+1]=c[a+1]>>>b|c[a]<<32-a,c[a]>>>=b)};var FyUtils,FyConst,FyLineNumber,FyExceptionHandler,FyClass,FyException,FyGlobal,FyMessage,FyTableSwitchTarget,FyLookupSwitchTarget;
(function(){FyGlobal={STRICT_CHECK:!0};var a=function(){};a.prototype.shallowClone=function(a,c){for(var d in a)c[d]=a[d]};a.prototype.simpleClone=function(a,c,d){if(d)for(var e in d){var g=d[e],f=a[g];if(void 0!==f)if("string"===typeof f||"number"===typeof f)c[g]=f;else throw new FyException(void 0,"Value of key["+g+"] is not string or number");}else for(g in a)if(f=a[g],"string"===typeof f||"number"===typeof f)c[g]=f};a.prototype.utf8Size=function(a){a&=65535;return 2048<a?3:128<a||0===a?2:1};a.prototype.utf8SizeU=
function(a){a=a<<24>>24;127<a&&(a-=256);return 0<=a?1:-16<=a?-1:-32<=a?3:-64<=a?2:-1};a.prototype.utf8Decode=function(a,c,d,e){switch(this.utf8SizeU(a[c])){case 1:return d[e]=a[c],1;case 2:return d[e]=((a[c]&31)<<6)+(a[c+1]&63),2;case 3:return d[e]=((a[c]&15)<<12)+((a[c+1]&63)<<6)+(a[c+2]&63),3;default:return d[e]=63,1}};a.prototype.utf8Encode=function(a,c,d){a&=65535;switch(this.utf8Size(a)){case 3:return c[d]=(a>>12)-32,c[d+1]=(a>>6&63)-128,c[d+2]=(a&63)-128,3;case 2:return c[d]=(a>>6)-64,c[d+1]=
(a&63)-128,2;case 1:return c[d]=a,1;default:return c[d]=63,1}};FyUtils=new a;FyConst=new function(){this.TYPE_OBJECT=0;this.TYPE_PRIMITIVE=1;this.TYPE_ARRAY=2;this.ARRAY_TYPE_BYTE=0;this.ARRAY_TYPE_SHORT=1;this.ARRAY_TYPE_INT=2;this.ARRAY_TYPE_LONG=3;this.FY_ACC_ABSTRACT=1024;this.FY_ACC_FINAL=16;this.FY_ACC_INTERFACE=512;this.FY_ACC_NATIVE=256;this.FY_ACC_PRIVATE=2;this.FY_ACC_PROTECTED=4;this.FY_ACC_PUBLIC=1;this.FY_ACC_STATIC=8;this.FY_ACC_STRICT=2048;this.FY_ACC_SYNCHRONIZED=this.FY_ACC_SUPER=
32;this.FY_ACC_TRANSIENT=128;this.FY_ACC_VOLATILE=64;this.FY_ACC_VARARGS=128;this.FY_ACC_BRIDGE=64;this.FY_ACC_SYNTHETIC=4096;this.FY_ACC_ANNOTATION=8192;this.FY_ACC_ENUM=16384;this.FY_ACC_SOFT_REF=32768;this.FY_ACC_WEAK_REF=65536;this.FY_ACC_PHANTOM_REF=131072;this.FY_ACC_CONSTRUCTOR=1048576;this.FY_ACC_CLINIT=2097152;this.FY_ACC_VERIFIED=2147483648;this.FY_TM_STATE_NEW=0;this.FY_TM_STATE_BOOT_PENDING=1;this.FY_TM_STATE_STOP=2;this.FY_TM_STATE_RUN_PENDING=3;this.FY_TM_STATE_RUNNING=4;this.FY_TM_STATE_STOP_PENDING=
5;this.FY_TM_STATE_DEAD_PENDING=6;this.FY_TM_STATE_DEAD=7;this.FY_AT_BYTE=0;this.FY_AT_SHORT=1;this.FY_AT_INT=2;this.FY_AT_LONG=3;this.FY_TYPE_BYTE="B";this.FY_TYPE_CHAR="C";this.FY_TYPE_DOUBLE="D";this.FY_TYPE_FLOAT="F";this.FY_TYPE_LONG="J";this.FY_TYPE_SHORT="S";this.FY_TYPE_BOOLEAN="Z";this.FY_TYPE_ARRAY="[";this.FY_TYPE_INT="I";this.FY_TYPE_HANDLE="L";this.FY_TYPE_WIDE="W";this.FY_TYPE_RETURN="R";this.FY_TYPE_WIDE2="_";this.FY_TYPE_UNKNOWN="X";this.FY_TYPE_VOID="V";this.FY_ATT_CODE="Code";this.FY_ATT_LINENUM=
"LineNumberTable";this.FY_ATT_SYNTH="Synthetic";this.FY_ATT_SOURCE_FILE="SourceFile";this.FY_ATT_CONSTANT_VALIE="ConstantValue";this.FY_BASE_STRING="java/lang/String";this.FY_BASE_VM="com/cirnoworks/fisce/privat/FiScEVM";this.FY_BASE_ENUM="java/lang/Enum";this.FY_BASE_ANNOTATION="java/lang/annotation/Annotation";this.FY_BASE_STRING_BUILDER="java/lang/StringBuilder";this.FY_BASE_OBJECT="java/lang/Object";this.FY_BASE_CLASS="java/lang/Class";this.FY_BASE_CLASSLOADER="java/lang/ClassLoader";this.FY_BASE_THROWABLE=
"java/lang/Throwable";this.FY_BASE_THREAD="java/lang/Thread";this.FY_BASE_SYSTEM="java/lang/System";this.FY_BASE_RUNTIME="java/lang/Runtime";this.FY_BASE_BOOLEAN="java/lang/Boolean";this.FY_BASE_BYTE="java/lang/Byte";this.FY_BASE_CHAR="java/lang/Character";this.FY_BASE_SHORT="java/lang/Short";this.FY_BASE_INT="java/lang/Integer";this.FY_BASE_LONG="java/lang/Long";this.FY_BASE_FLOAT="java/lang/Float";this.FY_BASE_DOUBLE="java/lang/Double";this.FY_BASE_MATH="java/lang/Math";this.FY_BASE_FINALIZER="java/lang/Finalizer";
this.FY_BASE_RUNTIME="java/lang/Runtime";this.FY_PRIM_BOOLEAN="boolean";this.FY_PRIM_BYTE="byte";this.FY_PRIM_SHORT="short";this.FY_PRIM_CHAR="char";this.FY_PRIM_INT="int";this.FY_PRIM_FLOAT="float";this.FY_PRIM_LONG="long";this.FY_PRIM_DOUBLE="double";this.FY_PRIM_VOID="void";this.FY_IO_INPUTSTREAM="java/io/InputStream";this.FY_IO_PRINTSTREAM="java/io/PrintStream";this.FY_REFLECT_ARRAY="java/lang/reflect/Array";this.FY_REFLECT_CONSTRUCTOR="java/lang/reflect/Constructor";this.FY_REFLECT_FIELD="java/lang/reflect/Field";
this.FY_REFLECT_METHOD="java/lang/reflect/Method";this.FY_REFLECT_PROXY="java/lang/reflect/Proxy";this.FY_REF_SOFT="java/lang/ref/SoftReference";this.FY_REF_WEAK="java/lang/ref/WeakReference";this.FY_REF_PHANTOM="java/lang/ref/PhantomReference";this.FY_REF="java/lang/ref/Reference";this.FY_BASE_STACKTHREADELEMENT="java/lang/StackTraceElement";this.FY_BOX_BOOLEAN=this.FY_BASE_BOOLEAN+".valueOf.(Z).L"+this.FY_BASE_BOOLEAN+";";this.FY_BOX_BYTE=this.FY_BASE_BYTE+".valueOf.(B).L"+this.FY_BASE_BYTE+";";
this.FY_BOX_SHORT=this.FY_BASE_SHORT+".valueOf.(S).L"+this.FY_BASE_SHORT+";";this.FY_BOX_CHARACTER=this.FY_BASE_CHARACTER+".valueOf.(C).L"+this.FY_BASE_CHARACTER+";";this.FY_BOX_INTEGER=this.FY_BASE_INTEGER+".valueOf.(I).L"+this.FY_BASE_INTEGER+";";this.FY_BOX_FLOAT=this.FY_BASE_FLOAT+".valueOf.(F).L"+this.FY_BASE_FLOAT+";";this.FY_BOX_LONG=this.FY_BASE_LONG+".valueOf.(J).L"+this.FY_BASE_LONG+";";this.FY_BOX_DOUBLE=this.FY_BASE_DOUBLE+".valueOf.(D).L"+this.FY_BASE_DOUBLE+";";this.FY_UNBOX_BOOLEAN=
this.FY_BASE_BOOLEAN+".booleanValue.()Z";this.FY_UNBOX_BYTE=this.FY_BASE_BYTE+".byteValue.()B";this.FY_UNBOX_SHORT=this.FY_BASE_SHORT+".shortValue.()S";this.FY_UNBOX_CHARACTER=this.FY_BASE_CHAR+".charValue.()C";this.FY_UNBOX_INTEGER=this.FY_BASE_INT+".intValue.()I";this.FY_UNBOX_FLOAT=this.FY_BASE_FLOAT+".floatValue.()F";this.FY_UNBOX_LONG=this.FY_BASE_LONG+".longValue.()J";this.FY_UNBOX_DOUBLE=this.FY_BASE_DOUBLE+".doubleValue.()D";this.FY_VALUE_BOOLEAN=this.FY_BASE_BOOLEAN+".value.Z";this.FY_VALUE_BYTE=
this.FY_BASE_BYTE+".value.B";this.FY_VALUE_SHORT=this.FY_BASE_SHORT+".value.S";this.FY_VALUE_CHARACTER=this.FY_BASE_CHAR+".value.C";this.FY_VALUE_INTEGER=this.FY_BASE_INT+".value.I";this.FY_VALUE_FLOAT=this.FY_BASE_FLOAT+".value.F";this.FY_VALUE_LONG=this.FY_BASE_LONG+".value.J";this.FY_VALUE_DOUBLE=this.FY_BASE_DOUBLE+".value.D";this.FY_METHOD_INIT="<init>";this.FY_METHOD_CLINIT="<clinit>";this.FY_METHODF_MAIN=".main.([L"+this.FY_BASE_STRING+";)V";this.FY_METHODF_RUN=".run.()V";this.FY_METHODF_FINALIZE=
".finalize.()V";this.FY_FIELDF_PRIORITY=".priority.I";this.FY_FIELDF_NAME=".name.[C";this.FY_FIELDF_DAEMON=".daemon.Z";this.FY_EXCEPTION_ITE="java/lang/InvocationTargetException";this.FY_EXCEPTION_MONITOR="java/lang/IllegalMonitorStateException";this.FY_EXCEPTION_NO_METHOD="java/lang/NoSuchMethodError";this.FY_EXCEPTION_NPT="java/lang/NullPointerException";this.FY_EXCEPTION_ARITHMETIC="java/lang/ArithmeticException";this.FY_EXCEPTION_INCOMPAT_CHANGE="java/lang/IncompatibleClassChangeError";this.FY_EXCEPTION_VM=
"java/lang/VirtualMachineError";this.FY_EXCEPTION_CAST="java/lang/ClassCastException";this.FY_EXCEPTION_IO="java/io/IOException";this.FY_EXCEPTION_FNF="java/io/FileNotFoundException";this.FY_EXCEPTION_RT="java/lang/RuntimeException";this.FY_EXCEPTION_IOOB="java/lang/IndexOutOfBoundsException";this.FY_EXCEPTION_AIOOB="java/lang/ArrayIndexOutOfBoundsException";this.FY_EXCEPTION_STORE="java/lang/ArrayStoreException";this.FY_EXCEPTION_CLASSNOTFOUND="java/lang/ClassNotFoundException";this.FY_EXCEPTION_ABSTRACT=
"java/lang/AbstractMethodError";this.FY_EXCEPTION_ACCESS="java/lang/IllegalAccessError";this.FY_EXCEPTION_NASE="java/lang/NegativeArraySizeException";this.FY_EXCEPTION_INTR="java/lang/InterruptedException";this.FY_EXCEPTION_IMSE="java/lang/IllegalMonitorStateException";this.FY_EXCEPTION_ARGU="java/lang/IllegalArgumentException";this.stringArray="[L"+this.FY_BASE_STRING+";";this.throwablePrintStacktrace=this.FY_BASE_THROWABLE+".printStackTrace.()V";this.throwableDetailMessage=this.FY_BASE_THROWABLE+
".detailMessage.L"+this.FY_BASE_STRING+";";this.throwableStackTrace=this.FY_BASE_THROWABLE+".stackTrace.[L"+this.FY_BASE_STACKTHREADELEMENT+";";this.stringCount=this.FY_BASE_STRING+".count.I";this.stringValue=this.FY_BASE_STRING+".value.[C";this.stringOffset=this.FY_BASE_STRING+".offset.I";this.stackTraceElementArray="[L"+this.FY_BASE_STACKTHREADELEMENT+";";this.stackTraceElementDeclaringClass=this.FY_BASE_STACKTHREADELEMENT+".declaringClass.L"+this.FY_BASE_STRING+";";this.stackTraceElementMethodName=
this.FY_BASE_STACKTHREADELEMENT+".methodName.L"+this.FY_BASE_STRING+";";this.stackTraceElementFileName=this.FY_BASE_STACKTHREADELEMENT+".fileName.L"+this.FY_BASE_STRING+";";this.stackTraceElementLineNumber=this.FY_BASE_STACKTHREADELEMENT+".lineNumber.I";this.Z=90;this.B=66;this.C=67;this.S=83;this.I=73;this.F=70;this.J=74;this.D=68;this.L=76;this.V=86;this.ARR=91;Object.preventExtensions(this)};FyLineNumber=function(){this.line=this.start=0;Object.preventExtensions(this)};FyExceptionHandler=function(){this.end=
this.start=0;this.catchClass=void 0;this.handler=0;Object.preventExtensions(this)};FyTableSwitchTarget=function(){this.max=this.min=this.dflt=0;this.targets=[];Object.preventExtensions(this)};FyLookupSwitchTarget=function(){this.dflt=0;this.targets={};Object.preventExtensions(this)};FyException=function(a,c){this.name="FyException";this.clazz=a;this.message=c;this.stack=Error().stack;Object.preventExtensions(this)};FyException.prototype.constructor=FyException;FyException.prototype.toString=function(){return""+
(this.clazz?this.clazz:"FatalError")+": "+this.message+(this.stack?"\n"+this.stack:"")};FyMessage=function(){this.type=0;this.thread=void 0;this.sleepTime=0;Object.preventExtensions(this)};FyMessage.message_continue=0;FyMessage.message_none=1;FyMessage.message_thread_dead=2;FyMessage.message_invoke_native=3;FyMessage.message_exception=4;FyMessage.message_sleep=5;FyMessage.message_vm_dead=6})();var FyMethod;
(function(){FyMethod=function(){this.accessFlags=this.descriptor=this.name="";this.paramStackUsage=0;this.returnType=this.paramType="";this.parameterCount=0;this.parameterClassNames=[];this.returnClassName="";this.exceptions=[];this.exceptionTable=[];this.lineNumberTable=[];this.maxLocals=this.maxStack=0;this.code=[];this.uniqueName=this.fullName="";this.owner=void 0;this.methodId=0;this.opsCheck={};this.frames={};this.tableSwitchTargets=[];this.lookupSwitchTargets=[];this.invoke=void 0;Object.preventExtensions(this)};
FyMethod.prototype.toString=function(){return"{Method}"+this.uniqueName}})();var FyField;(function(){FyField=function(){this.descriptor=this.name="";this.size=this.posRel=this.accessFlags=0;this.uniqueName=this.fullName="";this.owner=void 0;this.fieldId=0;this.type=this.constantValueData=void 0;this.posAbs=0;Object.preventExtensions(this)};FyField.prototype.toString=function(){return"{Field}"+this.uniqueName}})();
(function(){FyClass=function(a){this.name="";this.sourceFile=void 0;this.minorVersion=this.majorVersion=0;this.constants=[];this.accessFlags=0;this.fields=[];this.methods=[];this.phase=this.staticSize=this.sizeRel=0;this.needFinalize=!1;this.ofsInHeap=this.sizeAbs=this.classId=0;this.interfaces=[];this.superClass=void 0;this.type=a;this.clinitThreadId=0;this.clinit=void 0;this.fieldStatic=[];this.fieldAbs=[];this.virtualTable={};this.contentClass=void 0;this.arrayType=0;this.pType=void 0;Object.preventExtensions(this)};
FyClass.prototype.toString=function(){return this.name}})();var FyContext;
(function(){function a(a,b){if("number"!==typeof b||void 0===a.length||0>b||b>=a.length)throw new FyException(void 0,"IllegalArgumentException: "+a.length+"["+b+"]");return a[b]}function b(a,d,e,g){var f,h=[];g||(g={});for(var l=0,n=a.interfaces.length;l<n;l++)if(f=a.interfaces[l],!g[f.classId]&&(h.push(f),g[f.classId]=!0,f=d.call(e,f),void 0!==f))return f;l=0;for(n=h.length;l<n;l++)if(f=b(h[l],d,e,g),void 0!==f)return f;if(0===(a.accessFlags&FyConst.FY_ACC_INTERFACE)&&a.superClass&&(f=b(a.superClass,
d,e,g),void 0!==f))return f}FyContext=function(){var a=["D","I","W","E"];this.settings={};this.classDef={};this.classes=[void 0];this.mapClassNameToId={};this.mapClassIdToHandle={};this.methods=[];this.mapMethodNameToId={};this.mapMethodIdToHandle={};this.fields=[];this.mapFieldNameToId={};this.mapFieldIdToHandle={};this.nativeHandlers={};this.classLoader=new FyClassLoader(this);this.heap=new FyHeap(this);this.threadManager=new FyThreadManager(this);this.log=function(b,e){console.log(a[b]+": "+e)};
this.TOP_CONSTRUCTOR=this.TOP_FIELD=this.TOP_METHOD=this.TOP_CLASS=this.TOP_PHANTOM_REF=this.TOP_WEAK_REF=this.TOP_SOFT_REF=this.TOP_ANNOTATION=this.TOP_ENUM=this.TOP_THROWABLE=this.TOP_OBJECT=void 0;Object.preventExtensions(this)};FyContext.primitives={Z:"boolean",B:"byte",S:"short",C:"char",I:"int",F:"float",J:"long",D:"double",V:"void"};FyContext.mapPrimitivesRev={"boolean":"Z","byte":"B","short":"S","char":"C","int":"I","float":"F","long":"J","double":"D","void":"V"};FyContext.stringPool={};FyContext.staticNativeHandlers=
{};FyContext.registerStaticNH=function(a,b,e,g){this.staticNativeHandlers[a]={func:b,extraVars:e,stackSize:g}};FyContext.prototype.pool=function(a){if("string"!==typeof a)throw new FyException(void 0,"Type of "+a+" is not string");var b=FyContext.stringPool[a];b!==a&&(b=a,FyContext.stringPool[a]=a);return b};FyContext.prototype.getSetting=function(a,b){var e=settings[a];return void 0===e?b:e};FyContext.prototype.addClassDef=function(c){var b=c.strings,e=c.constants;c=c.classes;for(var g=1;g<e.length;g++){var f=
e[g];void 0!==f.name&&(f.name=this.pool(a(b,f.name)));void 0!==f.string&&(f.string=this.pool(a(b,f.string)));void 0!==f.className&&(f.className=this.pool(a(b,f.className)));void 0!==f.nameAndType&&(f.nameAndType=this.pool(a(b,f.nameAndType)))}for(g=0;g<c.length;g++){f=c[g];f.name=this.pool(a(b,f.name));void 0!==f.sourceFile&&(f.sourceFile=this.pool(a(b,f.sourceFile)));for(var h=0;h<f.constants.length;h++)f.constants[h]=a(e,f.constants[h]);for(h=0;h<f.fields.length;h++){var l=f.fields[h];l.name=this.pool(a(b,
l.name));l.descriptor=this.pool(a(b,l.descriptor))}for(h=0;h<f.methods.length;h++){l=f.methods[h];l.name=this.pool(a(b,l.name));l.descriptor=this.pool(a(b,l.descriptor));l.paramType=this.pool(a(b,l.paramType));l.returnType=this.pool(a(b,l.returnType));for(var n=0;n<l.exceptions.length;n++)l.exceptions[n]=this.pool(a(b,l.exceptions[n]));for(n=0;n<l.parameterClassNames.length;n++)l.parameterClassNames[n]=this.pool(a(b,l.parameterClassNames[n]));l.returnClassName=this.pool(a(b,l.returnClassName))}this.classDef[f.name]=
f}};FyContext.prototype.registerField=function(a){var b=this.mapFieldNameToId[a.uniqueName];void 0===b&&(b=this.fields.length,a.fieldId=b,this.mapFieldNameToId[a.uniqueName]=b);this.fields[b]=a};FyContext.prototype.getField=function(a){a=this.mapFieldNameToId[a];return void 0===a?void 0:this.fields[a]};FyContext.prototype.lookupFieldVirtual=function(a,d){var e,g=this.mapFieldNameToId[this.pool(a.name+d)];if(void 0!==g)return this.fields[g];for(e=a.superClass;e;){g=this.mapFieldNameToId[e.name+d];
if(void 0!==g)return this.mapFieldNameToId[this.pool(a.name+d)]=g,this.fields[g];e=e.superClass}return b(a,function(b){b=this.mapFieldNameToId[b.name+d];if(void 0!==b)return this.mapFieldNameToId[this.pool(a.name+d)]=b,this.fields[b]},this)};FyContext.prototype.lookupFieldVirtualFromConstant=function(a){var b=a.resolvedField;if(void 0===b){b=this.lookupClass(a.className);if(void 0===b)throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,a.className);if(b=this.lookupFieldVirtual(b,a.nameAndType))a.resolvedField=
b;else throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,a.className+"."+a.nameAndType+" not found");delete a.className;delete a.nameAndType}return b};FyContext.prototype.registerMethod=function(a){var b=this.mapMethodNameToId[a.uniqueName];void 0===b?(b=this.methods.length,a.methodId=b,this.methods.push(a),this.mapMethodNameToId[a.uniqueName]=b):this.methods[b]=a};FyContext.prototype.getMethod=function(a){a=this.mapMethodNameToId[a];return void 0===a?void 0:this.methods[a]};FyContext.prototype.lookupMethodVirtual=
function(a,d){var e,g=this.mapMethodNameToId[this.pool(a.name+d)];if(void 0!==g)return this.methods[g];for(e=a.superClass;e;){g=this.mapMethodNameToId[e.name+d];if(void 0!==g)return this.mapMethodNameToId[this.pool(a.name+d)]=g,this.methods[g];e=e.superClass}return b(a,function(b){b=this.mapMethodNameToId[b.name+d];if(void 0!==b)return this.mapMethodNameToId[this.pool(a.name+d)]=b,this.methods[b]},this)};FyContext.prototype.lookupMethodVirtualByMethod=function(a,b){var e=b.methodId,g=a.virtualTable[e];
if(void 0===g){g=this.lookupMethodVirtual(a,b.fullName);if(void 0===g||g.accessFlags&FyConst.FY_ACC_ABSTRACT)throw new FyException(FyConst.FY_EXCEPTION_ABSTRACT,a.name+b.fullName);if(g.accessFlags&FyConst.FY_ACC_STATIC)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method "+a.name+b.fullName+" changed to static");a.virtualTable[e]=g}return g};FyContext.prototype.lookupMethodVirtualFromInterfaces=function(a,b){for(var e=a.name+b,g=!0;a;){for(var f=a.interfaces,h=0,l=f.length;h<l;h++){var n=
this.mapMethodNameToId[f[h].name+b];if(void 0!==n)return g||(this.mapMethodNameToId[this.pool(e)]=n),this.methods[n]}a=a.superClass;g=!1}};FyContext.prototype.lookupMethodVirtualFromConstant=function(a){var b=a.resolvedMethod;if(!b){b=this.lookupClass(a.className);if(void 0===b)throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,a.className);if(b=this.lookupMethodVirtual(b,a.nameAndType))a.resolvedMethod=b;else throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,a.className+"."+a.nameAndType+
" not found");delete a.className;delete a.nameAndType}return b};FyContext.prototype.registerClass=function(a){var b=this.mapClassNameToId[a.name];void 0===b&&(b=this.classes.length,this.mapClassNameToId[a.name]=b);a.classId=b;this.classes[b]=a};FyContext.prototype.getClass=function(a){a=this.mapClassNameToId[a];return void 0===a||void 0===this.classes[a]?void 0:this.classes[a]};FyContext.prototype.lookupClass=function(a){var b=this.getClass(a);if(void 0===b){var e=void 0;if(!a)throw new FyException(void 0,
"Class name for load is null!");b=this.classLoader.loadClass(a);this.registerClass(b);b.type==FyConst.TYPE_OBJECT&&(e=this.classDef[a]);this.classLoader.phase2(b,e);this.lookupClass(FyConst.FY_BASE_CLASS)}return b};FyContext.prototype.lookupArrayClass=function(a){return a.type===FyConst.TYPE_OBJECT?this.lookupClass("[L"+a.name+";"):this.lookupClass("["+FyContext.mapPrimitivesRev[a.name])};FyContext.prototype.lookupClassFromConstant=function(a){if(!a.resolvedClass){a.resolvedClass=this.lookupClass(a.name);
if(!a.resolvedClass)throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,a.name);delete a.name}return a.resolvedClass};FyContext.prototype.getClassObjectHandle=function(a){var b=this.mapClassIdToHandle[a.classId];void 0===b&&(b=this.lookupClass(FyConst.FY_BASE_CLASS),this.heap.beginProtect(),b=this.heap.allocate(b),this.heap.getObject(b).multiUsageData=a.classId,this.mapClassIdToHandle[a.classId]=b);return b};FyContext.prototype.getClassFromClassObject=function(a){var b=this.heap.getObject(a);
if(b.clazz!==this.TOP_CLASS)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Object #"+a+"("+b.clazz.name+") is not a class object");return this.classes[b.multiUsageData]};FyContext.prototype.getMethodObjectHandle=function(a){var b=this.mapMethodIdToHandle[a.methodId];void 0===b&&(this.heap.beginProtect(),b=a.accessFlags&FyConst.FY_ACC_CONSTRUCTOR?this.heap.allocate(this.lookupClass(FyConst.FY_REFLECT_CONSTRUCTOR)):this.heap.allocate(this.lookupClass(FyConst.FY_REFLECT_METHOD)),this.heap.getObject(b).multiUsageData=
a.methodId,this.mapMethodIdToHandle[a.methodId]=b);return b};FyContext.prototype.getMethodFromMethodObject=function(a){var b=this.heap.getObject(a);if(b.clazz!==this.TOP_METHOD&&b.clazz!==this.TOP_CONSTRUCTOR)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Object #"+a+"("+b.clazz.name+") is not a method or constructor object");return this.methods[b.multiUsageData]};FyContext.prototype.getFieldObjectHandle=function(a){var b=this.mapFieldIdToHandle[a.fieldId];void 0===b&&(this.heap.beginProtect(),
b=this.heap.allocate(this.lookupClass(FyConst.FY_REFLECT_FIELD)),this.heap.getObject(b).multiUsageData=a.fieldId,this.mapFieldIdToHandle[a.fieldId]=b);return b};FyContext.prototype.getFieldFromFieldObject=function(a){var b=this.heap.getObject(a);if(b.clazz!==this.TOP_FIELD)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Object #"+a+"("+b.clazz.name+") is not a field object");return this.fields[b.multiUsageData]};FyContext.prototype.panic=function(a,b){console.log("ERROR! Virtual machine panic: "+
a);if(b)throw b;throw Error("Virtual machine panic!");};FyContext.prototype.registerNativeHandler=function(a,b,e,g){if("object"===typeof a)if(a.length)for(b=0,e=a.length;b<e;b++)this.nativeHandlers[a.name]={func:a.func,extraVars:a.extraVars,stackSize:a.stackSize};else for(var f in a)this.nativeHandlers[f]={func:a[f],extraVars:0,stackSize:0};else e||(e=0),g||(g=0),this.nativeHandlers[a]={func:b,extraVars:e,stackSize:g}};FyContext.prototype.bootup=function(a){a=this.lookupClass(a);this.threadManager.bootFromMain(a)};
Object.preventExtensions(FyContext)})();var FyHeap;
(function(){FyHeap=function(a){this.context=a;this.statics=[];this.objects=Array(FyConfig.maxObjects);this.toFinalize=[];this.protectMode=!1;this.protectedObjects=[];this.literials={};this.references={};this.toEnqueue=[];this.nextHandle=1;this.totalObjects=0;Object.preventExtensions(this)};FyHeap.prototype._fetchNextHandle=function(a){for(var b=this.nextHandle;this.objects[b];)if(b++,b>=FyConfig.maxObjects&&(b=1),b===this.nextHandle){if(a)throw new FyException(void 0,"Out of memory: handles");this._fetchNextHandle(!0)}return b};
FyHeap.prototype._allocate=function(a,b,c,d){throw"Abstract method";};FyHeap.prototype._release=function(a){throw"Abstract method";};FyHeap.prototype.release=function(a){this.objects[a]=void 0};FyHeap.prototype.allocateDirect=function(a,b,c,d){if(this.objects[d])throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Handle "+d+" already allocated.");a=this._allocate(a,b,c,d);this.protectMode&&this.protectedObjects.push(a);return a};FyHeap.prototype.allocate=function(a){if(a.type!=FyConst.TYPE_OBJECT)throw new FyException(void 0,
"Please use allocateArray to allocate arrays");a=this._allocate(a.sizeAbs,a,0,0);this.protectMode&&this.protectedObjects.push(a);return a};FyHeap.prototype.getArraySizeFromLength=function(a,b){switch(a.arrayType){case FyConst.FY_AT_LONG:return b<<1;case FyConst.FY_AT_INT:return b;case FyConst.FY_AT_BYTE:return b+3>>2;case FyConst.FY_AT_SHORT:return b+1>>1;default:throw new FyException(void 0,"Illegal array type "+a.arrayType+" for class "+a.name);}};FyHeap.prototype.allocateArray=function(a,b){if(a.type!==
FyConst.TYPE_ARRAY)throw new FyException(void 0,"Please use allocate to allocate objects.");var c=this._allocate(this.getArraySizeFromLength(a,b),a,b,0);this.protectMode&&this.protectedObjects.push(c);return c};FyHeap.prototype.beginProtect=function(){this.protectMode=!0};FyHeap.prototype.endProtect=function(){this.protectMode=!1;this.protectedObjects.length=0};FyHeap.prototype.getObject=function(a){if(0===a)throw new FyException(FyConst.FY_EXCEPTION_NPT);var b=this.objects[a];if(void 0===b)throw new FyException(void 0,
"Illegal object #"+a);return b};FyHeap.prototype.checkLength=function(a,b){if(0>b||b>a.multiUsageData)throw new FyException(FyConst.FY_EXCEPTION_IOOB,b+"/"+a.multiUsageData);};FyHeap.prototype.arrayLength=function(a){return this.getObject(a).multiUsageData};FyHeap.prototype.getString=function(a){var b,c,d,e="";if(!a)throw new FyException(FyConst.FY_EXCEPTION_NPT,"");if(void 0===this.context.lookupClass(FyConst.FY_BASE_STRING))throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,FyConst.FY_BASE_STRING);
b=this.context.getField(FyConst.stringValue);c=this.context.getField(FyConst.stringOffset);d=this.context.getField(FyConst.stringCount);c=this.getFieldInt(a,c.posAbs);d=this.getFieldInt(a,d.posAbs);a=this.getFieldInt(a,b.posAbs);for(b=0;b<d;b++)e+=String.fromCharCode(this.getArrayInt(a,b+c)&65535);return e};FyHeap.prototype.fillString=function(a,b){var c,d,e,g;if(void 0===this.context.lookupClass(FyConst.FY_BASE_STRING))throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,FyConst.FY_BASE_STRING);
c=this.context.getField(FyConst.stringValue);d=this.context.getField(FyConst.stringOffset);e=this.context.getField(FyConst.stringCount);g=this.allocateArray(this.context.lookupClass("[C"),b.length);this.putFieldInt(a,c.posAbs,g);this.putFieldInt(a,d.posAbs,0);this.putFieldInt(a,e.posAbs,b.length);for(c=0;c<b.length;c++)this.putArrayInt(g,c,b.charCodeAt(c)&65535);return a};FyHeap.prototype.fillStringWithArray=function(a,b,c,d){var e,g,f,h;if(void 0===this.context.lookupClass(FyConst.FY_BASE_STRING))throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,
FyConst.FY_BASE_STRING);e=this.context.getField(FyConst.stringValue);g=this.context.getField(FyConst.stringOffset);f=this.context.getField(FyConst.stringCount);h=this.allocateArray(this.context.lookupClass("[C"),str.length);this.putFieldInt(a,e.posAbs,h);this.putFieldInt(a,g.posAbs,0);this.putFieldInt(a,f.posAbs,d);for(e=0;e<d;e++)this.putArrayInt(h,e,b[e+c]&65535);return a};FyHeap.prototype.literal=function(a){var b=this.literials[a];void 0===b&&(b=this.allocate(this.context.lookupClass(FyConst.FY_BASE_STRING)),
this.fillString(b,a),this.literials[a]=b);return b};FyHeap.prototype.literalWithConstant=function(a){var b=a.value;void 0===b&&(b=a.value=this.literal(a.string));return b};FyHeap.prototype.putFieldString=function(a,b,c){var d=this.allocate(this.context.lookupClass(FyConst.FY_BASE_STRING));this.putFieldInt(a,b,d);this.fillString(d,c)};FyHeap.prototype.multiNewArray=function(a,b,c,d){var e=c[d],g=this.allocateArray(a,e),f,h;if(1<b)for(h=0;h<e;h++)f=this.multiNewArray(a.contentClass,b-1,c,d+1),this.putArrayRaw(g,
h,f);return g};FyHeap.prototype.unwrapBoolean=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_BOOLEAN),d=b.getField(FyConst.FY_VALUE_BOOLEAN);b.lookupClass(FyConst.FY_PRIM_BOOLEAN);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as boolean");return this.getFieldBoolean(a,d.posAbs)};FyHeap.prototype.wrapBoolean=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_BOOLEAN),d=b.getField(FyConst.FY_VALUE_BOOLEAN),c=b.heap.allocate(c);
b.heap.putFieldBoolean(c,d.posAbs,a);return c};FyHeap.prototype.unwrapBooleanRaw=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_BOOLEAN),d=b.getField(FyConst.FY_VALUE_BOOLEAN);b.lookupClass(FyConst.FY_PRIM_BOOLEAN);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as boolean");return this.getFieldRaw(a,d.posAbs)};FyHeap.prototype.wrapBooleanRaw=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_BOOLEAN),d=b.getField(FyConst.FY_VALUE_BOOLEAN),
c=b.heap.allocate(c);b.heap.putFieldRaw(c,d.posAbs,a);return c};FyHeap.prototype.unwrapByte=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_BYTE),d=b.getField(FyConst.FY_VALUE_BYTE);b.lookupClass(FyConst.FY_PRIM_BYTE);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as byte");return this.getFieldByte(a,d.posAbs)};FyHeap.prototype.wrapByte=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_BYTE),d=b.getField(FyConst.FY_VALUE_BYTE),
c=b.heap.allocate(c);b.heap.putFieldByte(c,d.posAbs,a);return c};FyHeap.prototype.unwrapShort=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_SHORT),d=b.getField(FyConst.FY_VALUE_SHORT);b.lookupClass(FyConst.FY_PRIM_SHORT);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as short");return this.getFieldShort(a,d.posAbs)};FyHeap.prototype.wrapShort=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_SHORT),d=b.getField(FyConst.FY_VALUE_SHORT),
c=b.heap.allocate(c);b.heap.putFieldShort(c,d.posAbs,a);return c};FyHeap.prototype.unwrapChar=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_CHAR),d=b.getField(FyConst.FY_VALUE_CHAR);b.lookupClass(FyConst.FY_PRIM_CHAR);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as char");return this.getFieldChar(a,d.posAbs)};FyHeap.prototype.wrapChar=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_CHAR),d=b.getField(FyConst.FY_VALUE_CHAR),
c=b.heap.allocate(c);b.heap.putFieldChar(c,d.posAbs,a);return c};FyHeap.prototype.unwrapInt=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_INT),d=b.getField(FyConst.FY_VALUE_INT);b.lookupClass(FyConst.FY_PRIM_INT);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as int");return this.getFieldInt(a,d.posAbs)};FyHeap.prototype.wrapInt=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_INT),d=b.getField(FyConst.FY_VALUE_INT),
c=b.heap.allocate(c);b.heap.putFieldInt(c,d.posAbs,a);return c};FyHeap.prototype.unwrapFloat=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_FLOAT),d=b.getField(FyConst.FY_VALUE_FLOAT);b.lookupClass(FyConst.FY_PRIM_FLOAT);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as float");return this.getFieldFloat(a,d.posAbs)};FyHeap.prototype.wrapFloat=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_FLOAT),d=b.getField(FyConst.FY_VALUE_FLOAT),
c=b.heap.allocate(c);b.heap.putFieldFloat(c,d.posAbs,a);return c};FyHeap.prototype.unwrapFloatRaw=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_FLOAT),d=b.getField(FyConst.FY_VALUE_FLOAT);b.lookupClass(FyConst.FY_PRIM_FLOAT);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as float");return this.getFieldRaw(a,d.posAbs)};FyHeap.prototype.wrapFloatRaw=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_FLOAT),d=b.getField(FyConst.FY_VALUE_FLOAT),
c=b.heap.allocate(c);b.heap.putFieldRaw(c,d.posAbs,a);return c};FyHeap.prototype.unwrapLong=function(a,b,c){var d=this.context,e=d.lookupClass(FyConst.FY_BASE_LONG),g=d.getField(FyConst.FY_VALUE_LONG);d.lookupClass(FyConst.FY_PRIM_LONG);if(this.getObject(a).clazz!==e)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as long");this.getFieldLongTo(a,g.posAbs,b,c)};FyHeap.prototype.wrapLong=function(a,b){var c=this.context,d=c.lookupClass(FyConst.FY_BASE_LONG),e=c.getField(FyConst.FY_VALUE_LONG),
d=c.heap.allocate(d);c.heap.putFieldLongFrom(d,e.posAbs,a,b);return d};FyHeap.prototype.unwrapDouble=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_DOUBLE),d=b.getField(FyConst.FY_VALUE_DOUBLE);b.lookupClass(FyConst.FY_PRIM_DOUBLE);if(this.getObject(a).clazz!==c)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as double");return this.getFieldDouble(a,d.posAbs)};FyHeap.prototype.wrapDouble=function(a){var b=this.context,c=b.lookupClass(FyConst.FY_BASE_DOUBLE),
d=b.getField(FyConst.FY_VALUE_DOUBLE),c=b.heap.allocate(c);b.heap.putFieldDouble(c,d.posAbs,a);return c};FyHeap.prototype.unwrapDoubleRaw=function(a,b,c){var d=this.context,e=d.lookupClass(FyConst.FY_BASE_DOUBLE),g=d.getField(FyConst.FY_VALUE_DOUBLE);d.lookupClass(FyConst.FY_PRIM_DOUBLE);if(this.getObject(a).clazz!==e)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't unwrap handle="+a+" as double");this.getFieldRawLongTo(a,g.posAbs,b,c)};FyHeap.prototype.wrapDoubleRaw=function(a,b){var c=this.context,
d=c.lookupClass(FyConst.FY_BASE_DOUBLE),e=c.getField(FyConst.FY_VALUE_DOUBLE),d=c.heap.allocate(d);c.heap.putFieldLongFrom(d,e.posAbs,a,b);return d};FyHeap.prototype.gc=function(){}})();var FyObject;
(function(){FyObject=function(){this.clazz=void 0;this.reference=this.monitorOwnerTimes=this.monitorOwnerId=this.multiUsageData=this.finalizeStatus=0;this.data=this.rawData=void 0;Object.preventExtensions(this)};Object.preventExtensions(FyObject.prototype);FyHeap.prototype.allocateStatic=function(a){this.statics[a.classId]=new Int32Array(a.staticSize)};FyHeap.prototype._release=function(a){};FyHeap.prototype._allocate=function(a,b,c,d){var e;d||(d=this._fetchNextHandle());if(this.objects[d])throw new FyException("Object "+
d+" already exists");e=this.objects[d]=new FyObject;e.multiUsageData=c;e.clazz=b;a=new ArrayBuffer(a<<2);e.rawData=new Int32Array(a);if(b.type===FyConst.TYPE_ARRAY)switch(b.name.charAt(1)){case "Z":case "B":e.data=new Int8Array(a);break;case "S":e.data=new Int16Array(a);break;case "C":e.data=new Uint16Array(a);break;case "L":case "I":case "[":e.data=new Int32Array(a);break;case "F":e.data=new Float32Array(a);break;case "J":e.data=new Uint32Array(a);break;case "D":e.data=new Float64Array(a);break;
default:throw new FyException(void 0,"Illegal array class: "+b.name);}else e.data=e.rawData;this.protectMode&&(this.protectedObjects[d]=!0);this.totalObjects++;return d};FyHeap.prototype.getArrayRaw=function(a,b){var c=this.getObject(a);this.checkLength(c,b);return c.rawData[b]};FyHeap.prototype.getArrayRawLongTo=function(a,b,c,d){a=this.getObject(a);this.checkLength(a,b);a=a.rawData;c[d]=a[b<<1];c[d+1]=a[(b<<1)+1]};FyHeap.prototype.getArrayBoolean=function(a,b){var c=this.getObject(a);this.checkLength(c,
b);return c.data[b]?!0:!1};FyHeap.prototype.getArrayByte=function(a,b){var c=this.getObject(a);this.checkLength(c,b);return c.data[b]};FyHeap.prototype.getArrayShort=function(a,b){var c=this.getObject(a);this.checkLength(c,b);return c.data[b]};FyHeap.prototype.getArrayChar=function(a,b){var c=this.getObject(a);this.checkLength(c,b);return c.data[b]};FyHeap.prototype.getArrayInt=function(a,b){var c=this.getObject(a);this.checkLength(c,b);return c.data[b]};FyHeap.prototype.getArrayFloat=function(a,
b){var c=this.getObject(a);this.checkLength(c,b);return c.data[b]};FyHeap.prototype.getArrayLongTo=function(a,b,c,d){a=this.getObject(a);this.checkLength(a,b);a=a.data;c[d]=a[b<<1];c[d+1]=a[(b<<1)+1];return c};FyHeap.prototype.getArrayDouble=function(a,b){var c=this.getObject(a);this.checkLength(c,b);return c.data[b]};FyHeap.prototype.putArrayRaw=function(a,b,c){a=this.getObject(a);this.checkLength(a,b);a.rawData[b]=c};FyHeap.prototype.putArrayRawLongFrom=function(a,b,c,d){a=this.getObject(a);this.checkLength(a,
b);a.rawData[b<<1]=c[d];a.rawData[(b<<1)+1]=c[d+1]};FyHeap.prototype.putArrayBoolean=function(a,b,c){a=this.getObject(a);this.checkLength(a,b);a.data[b]=c?1:0};FyHeap.prototype.putArrayByte=function(a,b,c){a=this.getObject(a);this.checkLength(a,b);a.data[b]=c};FyHeap.prototype.putArrayShort=function(a,b,c){a=this.getObject(a);this.checkLength(a,b);a.data[b]=c};FyHeap.prototype.putArrayChar=function(a,b,c){a=this.getObject(a);this.checkLength(a,b);a.data[b]=c};FyHeap.prototype.putArrayInt=function(a,
b,c){a=this.getObject(a);this.checkLength(a,b);a.data[b]=c};FyHeap.prototype.putArrayFloat=function(a,b,c){a=this.getObject(a);this.checkLength(a,b);a.data[b]=c};FyHeap.prototype.putArrayLongFrom=function(a,b,c,d){a=this.getObject(a);this.checkLength(a,b);a.data[b<<1]=c[d];a.data[(b<<1)+1]=c[d+1]};FyHeap.prototype.putArrayDouble=function(a,b,c){a=this.getObject(a);this.checkLength(a,b);a.data[b]=c};FyHeap.prototype.getFieldRaw=function(a,b){return this.getObject(a).rawData[b]};FyHeap.prototype.getFieldRawTo=
function(a,b,c,d){a=this.getObject(a);c[d]=a.rawData[b]};FyHeap.prototype.getFieldRawLongTo=function(a,b,c,d){a=this.getObject(a).rawData;c[d]=a[b];c[d+1]=a[b+1];return c};FyHeap.prototype.getFieldBoolean=function(a,b){return this.getObject(a).rawData[b]?!0:!1};FyHeap.prototype.getFieldByte=function(a,b){var c=this.getObject(a).rawData[b]&255;return c>>>7?c-256:c};FyHeap.prototype.getFieldShort=function(a,b){var c=this.getObject(a).rawData[b];return c>>>15?c-65536:c};FyHeap.prototype.getFieldChar=
function(a,b){return this.getObject(a).rawData[b]};FyHeap.prototype.getFieldInt=function(a,b){return this.getObject(a).rawData[b]};FyHeap.prototype.getFieldFloat=function(a,b){var c=this.getObject(a);return FyPortable.ieee32ToFloat(c.rawData[b])};FyHeap.prototype.getFieldLongTo=function(a,b,c,d){return this.getFieldRawLongTo(a,b,c,d)};FyHeap.prototype.getFieldDouble=function(a,b){var c=this.getObject(a);return FyPortable.ieee64ToDouble(c.rawData,b)};FyHeap.prototype.putFieldRaw=function(a,b,c){this.getObject(a).rawData[b]=
c};FyHeap.prototype.putFieldRawFrom=function(a,b,c,d){this.getObject(a).rawData[b]=c[d]};FyHeap.prototype.putFieldRawLongFrom=function(a,b,c,d){a=this.getObject(a);a.rawData[b]=c[d];a.rawData[b+1]=c[d+1]};FyHeap.prototype.putFieldBoolean=function(a,b,c){this.getObject(a).rawData[b]=c?1:0};FyHeap.prototype.putFieldByte=function(a,b,c){this.getObject(a).rawData[b]=c&255};FyHeap.prototype.putFieldShort=function(a,b,c){this.getObject(a).rawData[b]=c&65535};FyHeap.prototype.putFieldChar=function(a,b,c){this.getObject(a).rawData[b]=
c&65535};FyHeap.prototype.putFieldInt=function(a,b,c){this.getObject(a).rawData[b]=c};FyHeap.prototype.putFieldFloat=function(a,b,c){this.getObject(a).rawData[b]=FyPortable.floatToIeee32(c)};FyHeap.prototype.putFieldLongFrom=function(a,b,c,d){this.putFieldRawLongFrom(a,b,c,d)};FyHeap.prototype.putFieldDouble=function(a,b,c){a=this.getObject(a);FyPortable.doubleToIeee64(c,a.rawData,b)};FyHeap.prototype.getStaticRaw=function(a,b){return this.statics[a.classId][b]};FyHeap.prototype.getStaticRawTo=function(a,
b,c,d){c[d]=this.statics[a.classId][b]};FyHeap.prototype.getStaticRawLongTo=function(a,b,c,d){a=this.statics[a.classId];c[d]=a[b];c[d+1]=a[b+1];return c};FyHeap.prototype.getStaticBoolean=function(a,b){return this.statics[a.classId][b]?!0:!1};FyHeap.prototype.getStaticByte=function(a,b){var c=this.statics[a.classId][b]&255;return c>>>7?c-256:c};FyHeap.prototype.getStaticShort=function(a,b){var c=this.statics[a.classId][b]&65535;return c>>>15?c-65536:c};FyHeap.prototype.getStaticChar=function(a,b){return this.statics[a.classId][b]};
FyHeap.prototype.getStaticInt=function(a,b){return this.statics[a.classId][b]};FyHeap.prototype.getStaticFloat=function(a,b){return FyPortable.ieee32ToFloat(this.statics[a.classId][b])};FyHeap.prototype.getStaticLongTo=function(a,b,c,d){return this.getStaticRawLongTo(a,b,c,d)};FyHeap.prototype.getStaticDouble=function(a,b){return FyPortable.ieee64ToDouble(this.statics[a.classId],b)};FyHeap.prototype.putStaticRaw=function(a,b,c){this.statics[a.classId][b]=c};FyHeap.prototype.putStaticRawFrom=function(a,
b,c,d){this.statics[a.classId][b]=c[d]};FyHeap.prototype.putStaticRawLongFrom=function(a,b,c,d){a=this.statics[a.classId];a[b]=c[d];a[b+1]=c[d+1]};FyHeap.prototype.putStaticBoolean=function(a,b,c){this.statics[a.classId][b]=c?1:0};FyHeap.prototype.putStaticByte=function(a,b,c){this.statics[a.classId][b]=c&255};FyHeap.prototype.putStaticChar=function(a,b,c){this.statics[a.classId][b]=c&65535};FyHeap.prototype.putStaticShort=function(a,b,c){this.statics[a.classId][b]=c&65535};FyHeap.prototype.putStaticInt=
function(a,b,c){this.statics[a.classId][b]=c};FyHeap.prototype.putStaticFloat=function(a,b,c){this.statics[a.classId][b]=FyPortable.floatToIeee32(c)};FyHeap.prototype.putStaticLongFrom=function(a,b,c,d){this.putStaticRawLongFrom(a,b,c,d)};FyHeap.prototype.putStaticDouble=function(a,b,c){FyPortable.doubleToIeee64(c,this.statics[a.classId],b)};FyHeap.prototype.arrayCopy=function(a,b,c,d,e){var g=this.getObject(a),f=this.getObject(c),h=g.clazz,l=f.clazz;if(h.type!=FyConst.TYPE_ARRAY)throw new FyException(FyConst.FY_EXCEPTION_STORE,
"src is not array");if(l.type!=FyConst.TYPE_ARRAY)throw new FyException(FyConst.FY_EXCEPTION_STORE,"dest is not array");if(!this.context.classLoader.canCast(h.contentClass,l.contentClass)){if(!this.context.classLoader.canCast(l.contentClass,h.contentClass))throw new FyException(FyConst.FY_EXCEPTION_STORE,"Can't cast "+l.contentClass.name+" to "+h.contentClass.name);console.log("TODO: enforce System.arrayCopy's type check")}if(0>b||0>d||b+e>this.arrayLength(a)||d+e>this.arrayLength(c))throw new FyException(FyConst.FY_EXCEPTION_AIOOB,
b+"/"+this.arrayLength(a)+" => "+d+"/"+this.arrayLength(c)+" len="+e);"[J"===h.name&&(e<<=1,b<<=1,d<<=1);for(a=0;a<e;a++)f.data[d+a]=g.data[b+a]};FyHeap.prototype.clone=function(a){var b=this.getObject(a),c=b.clazz,d,e;if(c.type===FyConst.TYPE_OBJECT)for(d=this.allocate(c),a=this.getObject(d),e=0;e<c.sizeAbs;e++)a.rawData[e]=b.rawData[e];else if(c.type===FyConst.TYPE_ARRAY)b=this.arrayLength(a),d=this.allocateArray(c,b),this.arrayCopy(a,0,d,0,b);else throw new FyException(void 0,"Illegal object type "+
c.type+" for class to clone: "+c.name);return d};Object.preventExtensions(FyHeap.prototype)})();var FyClassLoader;
(function(){FyClassLoader=function(a){this.context=a};FyClassLoader.getArrayContentType=function(a){switch(a.charAt(1)){case FyConst.FY_TYPE_BOOLEAN:case FyConst.FY_TYPE_BYTE:return FyConst.FY_AT_BYTE;case FyConst.FY_TYPE_DOUBLE:case FyConst.FY_TYPE_LONG:return FyConst.FY_AT_LONG;case FyConst.FY_TYPE_CHAR:case FyConst.FY_TYPE_SHORT:return FyConst.FY_AT_SHORT;case FyConst.FY_TYPE_INT:case FyConst.FY_TYPE_FLOAT:case FyConst.FY_TYPE_HANDLE:case FyConst.FY_TYPE_ARRAY:return FyConst.FY_AT_INT;default:throw new FyException(null,
"Illegal array type: "+a+"("+a.charCodeAt(1)+")");}};FyClassLoader.getArrayContentName=function(a){switch(a.charAt(1)){case FyConst.FY_TYPE_ARRAY:return a.substring(1,a.length);case FyConst.FY_TYPE_HANDLE:return a.substring(2,a.length-1);default:return FyContext.primitives[a.charAt(1)]}};FyClassLoader.getArrayName=function(a){var b=FyContext.mapPrimitivesRev[a];return b?"["+b:a.charAt(0)===FyConst.FY_TYPE_ARRAY?"["+a:"[L"+a+";"};FyClassLoader.prototype.loadClass=function(a){var b;if(a.charAt(0)===
FyConst.FY_TYPE_ARRAY)a=this.context.pool(a),b=new FyClass(FyConst.TYPE_ARRAY),b.name=a,b.superClass=this.context.lookupClass(FyConst.FY_BASE_OBJECT),b.arrayType=FyClassLoader.getArrayContentType(a),b.contentClass=this.context.lookupClass(FyClassLoader.getArrayContentName(a));else if(FyContext.mapPrimitivesRev[a])a=this.context.pool(a),b=new FyClass(FyConst.TYPE_PRIMITIVE),b.name=a,b.superClass=this.context.lookupClass(FyConst.FY_BASE_OBJECT),b.pType=FyContext.mapPrimitivesRev[a].charCodeAt(0);else{var c=
this.context.classDef[a];if(!c)throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,"Class not found: "+a);this.context.pool(a);b=new FyClass(FyConst.TYPE_OBJECT);FyUtils.simpleClone(c,b,"name sourceFile accessFlags sizeRel staticSize phase".split(" "));var d=c.constants,e=b.constants;a=d.length;for(var g=0;g<a;g++)e[g]=d[g];d=c.methods;e=b.methods;a=d.length;for(g=0;g<a;g++){var f=d[g],h=e[g]=new FyMethod;FyUtils.simpleClone(f,h,"name descriptor accessFlags maxStack maxLocals paramStackUsage paramType returnType parameterCount returnClassName".split(" "));
h.fullName=this.context.pool("."+h.name+"."+h.descriptor);h.uniqueName=this.context.pool(b.name+h.fullName);h.owner=b;h.name===FyConst.FY_METHOD_CLINIT?(b.clinit=h,h.accessFlags|=FyConst.FY_ACC_CLINIT):h.name===FyConst.FY_METHOD_INIT&&(h.accessFlags|=FyConst.FY_ACC_CONSTRUCTOR);if(f.lineNumberTable)for(var l=0;l<f.lineNumberTable.length;l++){var n=new FyLineNumber;FyUtils.simpleClone(f.lineNumberTable[l],n);h.lineNumberTable[l]=n}if(f.lookupSwitchTargets)for(l=0;l<f.lookupSwitchTargets.length;l++){var n=
new FyLookupSwitchTarget,p=f.lookupSwitchTargets[l];n.dflt=p.dflt;n.targets=p.targets;h.lookupSwitchTargets[l]=n}if(f.tableSwitchTargets)for(l=0;l<f.tableSwitchTargets.length;l++)n=new FyTableSwitchTarget,p=f.tableSwitchTargets[l],n.dflt=p.dflt,n.min=p.min,n.max=p.max,n.targets=p.targets,h.tableSwitchTargets[l]=n;f.code&&(h.code=f.code);f.opsCheck&&(h.opsCheck=f.opsCheck);f.frames&&(h.frames=f.frames);f.parameterClassNames&&(h.parameterClassNames=f.parameterClassNames);f.exceptions&&(h.exceptions=
f.exceptions);h.accessFlags&FyConst.FY_ACC_NATIVE&&(f=this.context.nativeHandlers[h.uniqueName]||FyContext.staticNativeHandlers[h.uniqueName],void 0!==f&&(h.invoke=f.func,h.maxLocals+=f.extraVars,h.maxStack+=f.stackSize));this.context.registerMethod(h)}d=c.fields;e=b.fields;a=d.length;for(g=0;g<a;g++){h=e[g]=new FyField;FyUtils.simpleClone(d[g],h);h.fullName=this.context.pool("."+h.name+"."+h.descriptor);h.uniqueName=this.context.pool(b.name+h.fullName);h.owner=b;switch(h.descriptor.charCodeAt(0)){case FyConst.D:case FyConst.J:h.size=
2;break;default:h.size=1}this.context.registerField(h)}if(c.superClassData&&(c=b.constants[c.superClassData],b.superClass=c.resolvedClass,void 0===b.superClass)){b.superClass=this.context.getClass(c.name);if(void 0===b.superClass){b.superClass=this.loadClass(c.name);if(!b.superClass)throw new FyException(FyConst.FY_EXCEPTION_CLASSNOTFOUND,b.superClassData.name);this.context.registerClass(b.superClass)}c.resolvedClass=b.superClass;delete c.name}this.context.TOP_OBJECT||b.name!==FyConst.FY_BASE_OBJECT?
this.context.TOP_THROWABLE||b.name!==FyConst.FY_BASE_THROWABLE?this.context.TOP_ENUM||b.name!==FyConst.FY_BASE_ENUM?this.context.TOP_ANNOTATION||b.name!==FyConst.FY_BASE_ANNOTATION?this.context.TOP_SOFT_REF||b.name!==FyConst.FY_REF_SOFT?this.context.TOP_WEAK_REF||b.name!==FyConst.FY_REF_WEAK?this.context.TOP_PHANTOM_REF||b.name!==FyConst.FY_REF_PHANTOM?this.context.TOP_CLASS||b.name!==FyConst.FY_BASE_CLASS?this.context.TOP_METHOD||b.name!==FyConst.FY_REFLECT_METHOD?this.context.TOP_CONSTRUCTOR||b.name!==
FyConst.FY_REFLECT_CONSTRUCTOR?this.context.TOP_FIELD||b.name!==FyConst.FY_REFLECT_FIELD||(this.context.TOP_FIELD=b):this.context.TOP_CONSTRUCTOR=b:this.context.TOP_METHOD=b:this.context.TOP_CLASS=b:this.context.TOP_PHA3NTOM_REF=b:this.context.TOP_WEAK_REF=b:this.context.TOP_SOFT_REF=b:this.context.TOP_ANNOTATION=b:this.context.TOP_ENUM=b:this.context.TOP_THROWABLE=b:this.context.TOP_OBJECT=b}b.phase=1;return b};FyClassLoader.prototype.phase2=function(a,b){if(!a||!a.name||1!==a.phase)throw new FyException(void 0,
"Passed illegal class to class loader phase 2");a.phase=2;switch(a.type){case FyConst.TYPE_OBJECT:a.superClass&&1===a.superClass.phase&&this.phase2(a.superClass,this.context.classDef[a.superClass.name]);for(var c=b.interfaceDatas,d=c.length,e=0;e<d;e++)a.interfaces[e]=this.context.lookupClassFromConstant(a.constants[c[e]]);if(a.superClass){d=a;for(a.sizeAbs=0;d;){a.sizeAbs+=d.sizeRel;if(d!=this.context.TOP_OBJECT&&void 0===d.superClass)throw new FyException(void 0,"broken class link on "+d.name);
d=d.superClass}c=a.fields;d=c.length;for(e=0;e<d;e++){var g=c[e];g.posAbs=g.accessFlags&FyConst.FY_ACC_STATIC?g.posRel:a.superClass.sizeAbs+g.posRel}(d=this.context.lookupMethodVirtual(a,FyConst.FY_METHODF_FINALIZE))&&1<d.code.length&&(a.needFinalize=!0)}else for(a.sizeAbs=a.sizeRel,c=a.fields,d=c.length,e=0;e<d;e++)g=c[e],g.posAbs=g.posRel;this.canCastWithNull(a,this.context.TOP_ANNOTATION)?a.accessFlags|=FyConst.FY_ACC_ANNOTATION:this.canCastWithNull(a,this.context.TOP_ENUM)?a.accessFlags|=FyConst.FY_ACC_ENUM:
this.canCastWithNull(a,this.context.TOP_PHANTOM_REF)?a.accessFlags|=FyConst.FY_ACC_PHANTOM_REF:this.canCastWithNull(a,this.context.TOP_WEAK_REF)?a.accessFlags|=FyConst.FY_ACC_WEAK_REF:this.canCastWithNull(a,this.context.TOP_SOFT_REF)&&(a.accessFlags|=FyConst.FY_ACC_SOFT_REF);0<a.staticSize&&this.context.heap.allocateStatic(a);c=a.methods;d=c.length;for(e=0;e<d;e++){var g=c[e],f=b.methods[e];if(f.exceptionTable)for(var h in f.exceptionTable){var l=f.exceptionTable[h],n=g.exceptionTable[h]=new FyExceptionHandler;
FyUtils.simpleClone(l,n,["start","end","handler"]);l.catchClassData&&(n.catchClass=this.context.lookupClassFromConstant(a.constants[l.catchClassData]))}}if(a.superClass&&0<a.superClass.sizeAbs)for(d=a.superClass.sizeAbs,e=0;e<d;e++)a.fieldAbs[e]=a.superClass.fieldAbs[e];c=a.fields;d=c.length;for(e=0;e<d;e++){g=c[e];h=b.fields[e];g.accessFlags&FyConst.FY_ACC_STATIC?a.fieldStatic[g.posAbs]=g:a.fieldAbs[g.posAbs]=g;switch(g.descriptor.charAt(0)){case "[":g.type=this.context.lookupClass(g.descriptor);
break;case "L":g.type=this.context.lookupClass(g.descriptor.substring(1,g.descriptor.length-1));break;default:if(f=FyContext.primitives[g.descriptor.charAt(0)])g.type=this.context.lookupClass(f);else throw new FyException(null,"Illegal descriptor of field!");}if(h.constantValueData&&g.accessFlags&FyConst.FY_ACC_STATIC&&g.accessFlags&FyConst.FY_ACC_FINAL)switch(g.descriptor.charAt(0)){case FyConst.FY_TYPE_BOOLEAN:case FyConst.FY_TYPE_BYTE:case FyConst.FY_TYPE_SHORT:case FyConst.FY_TYPE_CHAR:case FyConst.FY_TYPE_INT:case FyConst.FY_TYPE_FLOAT:this.context.heap.putStaticRaw(a,
g.posAbs,a.constants[h.constantValueData].value);break;case FyConst.FY_TYPE_DOUBLE:case FyConst.FY_TYPE_LONG:this.context.heap.putStaticRawLongFrom(a,g.posAbs,a.constants[h.constantValueData].value,0);break;case FyConst.FY_TYPE_HANDLE:g.constantValueData=a.constants[h.constantValueData]}}}};FyClassLoader.prototype.canCast=function(a,b){if(a===b||b===this.context.TOP_OBJECT)return!0;if(a.type===FyConst.TYPE_OBJECT){if(b.accessFlags&FyConst.FY_ACC_INTERFACE)for(var c=0,d=a.interfaces.length;c<d;c++)if(this.canCast(a.interfaces[c],
b))return!0;if(a.superClass)return this.canCast(a.superClass,b)}else if(a.type===FyConst.TYPE_ARRAY){if(b.type==FyConst.TYPE_ARRAY)return this.canCast(a.contentClass,b.contentClass);if(b.type==FyConst.TYPE_OBJECT)return b===this.context.TOP_OBJECT}return!1};FyClassLoader.prototype.isSuperClassOf=function(a,b){return a===b?!1:this.canCast(b,a)};FyClassLoader.prototype.canCastWithNull=function(a,b){return void 0===b||null===b?!1:this.canCast(a,b)}})();var FyThread;
(function(){FyThread=function(a,b){this.STACK_SIZE=b-16;this.context=a;this.realStack=new Int32Array(b);this.stack=new Int32Array(this.realStack.buffer,64,this.STACK_SIZE);this.floatStack=new Float32Array(this.realStack.buffer,64,this.STACK_SIZE);this.typeStack=new Int8Array(this.STACK_SIZE);this.sp=0;this.framePos=this.STACK_SIZE;this.yield=!1;this.priority=this.status=this.currentThrowable=this.handle=0;this.threadId=1;this.nextWakeTime=this.pendingLockCount=this.waitForNotifyId=this.waitForLockId=
0;this.destroyPending=this.daemon=this.interrupted=!1;this.longOps=FyPortable.getLongOps(this.realStack);Object.preventExtensions(this)};FyThread.prototype.getCurrentMethod=function(){return this.context.methods[this.stack[this.framePos]]};FyThread.prototype.getCurrentStackBase=function(){return this.stack[this.framePos+1]};FyThread.prototype.getCurrentIp=function(){return this.stack[this.framePos+2]};FyThread.prototype.getCurrentLastIp=function(){return this.stack[this.framePos+3]};FyThread.prototype.rollbackCurrentIp=
function(){this.stack[this.framePos+2]=this.stack[this.framePos+3]};FyThread.prototype.getStackBase=function(a){return this.stack[this.STACK_SIZE-(a+1<<2)+1]};FyThread.prototype.getFrameMethod=function(a){return this.context.methods[this.stack[this.STACK_SIZE-(a+1<<2)]]};FyThread.prototype.getLastIp=function(a){return this.stack[this.STACK_SIZE-(a+1<<2)+3]};FyThread.prototype.getFramesCount=function(){return this.STACK_SIZE-this.framePos>>2};FyThread.prototype.localToFrame=function(a,b,c){var d=this.framePos;
this.sp=a;this.stack[d+2]=c;this.stack[d+3]=b};FyThread.prototype.pushFrame=function(a){var b=this.stack;if(this.sp+a.maxLocals+a.maxStack>=this.framePos-4)throw new FyException(void 0,"stack overflow for thread "+this.threadId);this.framePos-=4;b[this.framePos+0]=a.methodId;b[this.framePos+1]=this.sp;b[this.framePos+2]=0;b[this.framePos+3]=0;this.sp+=a.maxLocals;return this.framePos};FyThread.prototype.pushMethod=function(a,b){var c=this.pushFrame(a);a.accessFlags&FyConst.FY_ACC_SYNCHRONIZED&&this.monitorEnter(a.accessFlags&
FyConst.FY_ACC_STATIC?this.context.getClassObjectHandle(a.owner):this.stack[this.stack[c+1]]);return this.yield?0:b};FyThread.prototype.invokeStatic=function(a,b){if(!(a.accessFlags&FyConst.FY_ACC_STATIC))throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,tmpMethod.uniqueName+" is not static");var c=this.clinit(a.owner);if(void 0!==c){if(0==c.clinitThreadId)return c.clinitThreadId=this.threadId,this.rollbackCurrentIp(),this.pushFrame(c.clinit),b;this.rollbackCurrentIp();return 0}this.sp-=
a.paramStackUsage;if(a.accessFlags&FyConst.FY_ACC_NATIVE){if(a.invoke)return this.context.heap.beginProtect(),b=a.invoke(this.context,this,b),this.context.heap.endProtect(),this.yield&&(b=0),b;throw new FyException(void 0,"Unresolved native handler for "+a.uniqueName);}return this.pushMethod(a,b)};FyThread.prototype.invokeVirtual=function(a,b){if(a.accessFlags&FyConst.FY_ACC_STATIC)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,a.uniqueName+" is static");this.sp-=a.paramStackUsage+1;if(0===
this.stack[this.sp])throw new FyException(void 0,"Invoke virtual with a null this pointer");a.accessFlags&FyConst.FY_ACC_FINAL||(a=this.context.lookupMethodVirtualByMethod(this.context.heap.getObject(this.stack[this.sp]).clazz,a));if(a.accessFlags&FyConst.FY_ACC_NATIVE){if(a.invoke)return this.context.heap.beginProtect(),b=a.invoke(this.context,this,b),this.context.heap.endProtect(),this.yield&&(b=0),b;throw new FyException(void 0,"Unresolved native handler for "+a.uniqueName);}return this.pushMethod(a,
b)};FyThread.prototype.popFrame=function(a){this.sp=this.stack[this.framePos+1];this.framePos+=4;void 0!==a&&(this.sp+=a)};FyThread.prototype.getCurrentFramePos=function(){return this.framePos};FyThread.prototype.getExceptionHandlerIp=function(a,b){var c=this.getCurrentMethod();console.log("GetExceptionHandler ip: "+a+" "+b+" "+c.uniqueName);for(var d=0,e=c.exceptionTable.length;d<e;d++){var g=c.exceptionTable[d],f=this.context.heap.objects[a];console.log("# "+g.start+"-"+g.end+"("+(g.catchClass?
g.catchClass.name:"*")+")=>"+g.handler+" "+f.clazz.name);if(b>=g.start&&b<g.end)if(g.catchClass){if(this.context.classLoader.canCast(f.clazz,g.catchClass))return console.log("!!"+g.handler),g.handler}else return console.log("!!"+g.handler),g.handler}return-1};FyThread.prototype.walkFrames=function(a){for(var b=this.stack,c=this.framePos;c<this.STACK_SIZE&&!a((this.STACK_SIZE-c>>2)-1,b[c],b[c+1],b[c+2],b[c+3]);c+=4);};FyThread.prototype.fillStackTrace=function(a,b){var c=this.context,d=c.heap;c.lookupClass(FyConst.FY_BASE_THROWABLE);
var e=c.getField(FyConst.FY_BASE_THROWABLE+".stackTrace.[L"+FyConst.FY_BASE_STACKTHREADELEMENT+";");if(void 0===e)throw new FyException(void 0,"Can't find throwable's stackTrace field");var g=c.lookupClass(FyConst.FY_BASE_STACKTHREADELEMENT),f=c.lookupClass("[L"+FyConst.FY_BASE_STACKTHREADELEMENT+";"),h=c.getField(FyConst.FY_BASE_STACKTHREADELEMENT+".declaringClass.L"+FyConst.FY_BASE_STRING+";"),l=c.getField(FyConst.FY_BASE_STACKTHREADELEMENT+".methodName.L"+FyConst.FY_BASE_STRING+";"),n=c.getField(FyConst.FY_BASE_STACKTHREADELEMENT+
".fileName.L"+FyConst.FY_BASE_STRING+";"),p=c.getField(FyConst.FY_BASE_STACKTHREADELEMENT+".lineNumber.I"),m=this.getFramesCount()-1;if(b)for(var r=this.stack[this.getCurrentStackBase()];0<=m&&this.stack[this.getStackBase(m)]===r&&(this.getFrameMethod(m).name===FyConst.FY_METHOD_INIT||"fillInStackTrace"===this.getFrameMethod(m).name);m--);var s=d.allocateArray(f,m+1);d.putFieldInt(a,e.posAbs,s);this.walkFrames(function(a,b,e,f,r){e=-1;if(a>m)return!1;b=c.methods[b];f=d.allocate(g);d.putArrayInt(s,
m-a,f);d.putFieldString(f,h.posAbs,b.owner.name.replace(/\//g,"."));d.putFieldString(f,l.posAbs,b.name);d.putFieldString(f,n.posAbs,b.owner.sourceFile);if(b.accessFlags&FyConst.FY_ACC_NATIVE)e=-2;else if(b.lineNumberTable)for(a=b.lineNumberTable.length-1;0<=a;a--){var A=b.lineNumberTable[a];if(r>A.start){e=A.line;break}}d.putFieldInt(f,p.posAbs,e)})};FyThread.prototype.clinit=function(a){var b;if(void 0!==a&&-1!==a.clinitThreadId&&a.clinitThreadId!==this.threadId)return void 0===a.clinit?(b=this.clinit(a.superClass),
void 0===b&&(a.clinitThreadId=-1),b):a};FyThread.prototype.initWithMethod=function(a,b){if(b.fullName!==FyConst.FY_METHODF_MAIN||!(b.accessFlags&FyConst.FY_ACC_STATIC))throw new FyException("The boot method must be static void main(String[] )");this.context.lookupClass("[L"+FyConst.FY_BASE_STRING+";");this.handle=a;this.context.heap.getObject(a).multiUsageData=this.threadId;this.pushFrame(b);this.stack[0]=0;this.typeStack[0]=0};FyThread.prototype.initWithRun=function(a){var b=this.context.heap.getObject(a),
c=b.clazz;if(!this.context.classLoader.canCast(c,this.context.lookupClass(FyConst.FY_BASE_THREAD)))throw new FyException("The create(int) is used to start a "+FyConst.FY_BASE_THREAD+"!");c=this.context.lookupMethodVirtual(c,FyConst.FY_METHODF_RUN);b.multiUsageData=this.threadId;this.handle=a;this.pushFrame(c);this.stack[0]=a;this.typeStack[0]=1};FyThread.prototype.destroy=function(){var a=this.context.heap,b=a.getObject(this.handle);this.pendingLockCount=this.nextWakeTime=this.waitForNotifyId=this.waitForLockId=
this.handle=b.multiUsageData=0;this.destroyPending=!1;for(var c=1;c<FyConfig.maxObjects;c++)b=a.objects[c],void 0!==b&&b.monitorOwnerId===this.threadId&&(b.monitorOwnerId=0,b.monitorOwnerTimes=0)};FyThread.prototype.run=function(a,b){for(var c,d;0<b;){if(this.framePos===this.STACK_SIZE){a.type=FyMessage.message_thread_dead;return}c=this.getCurrentMethod();if(c.accessFlags&FyConst.FY_ACC_NATIVE)throw new FyException(void 0,"Native method pushed");c.invoke||FyAOTUtil.aot(c);if(this.currentThrowable)for(console.log("!!!Exception occored: "+
this.context.heap.getObject(this.currentThrowable).clazz.name+" at thread #"+this.threadId);;)if(c=this.getCurrentMethod(),d=this.getExceptionHandlerIp(this.currentThrowable,this.getCurrentLastIp()),0<=d){this.localToFrame(this.getCurrentStackBase()+c.maxLocals,d,d);this.stack[this.sp]=this.currentThrowable;this.sp++;this.currentThrowable=0;break}else if(c.accessFlags&FyConst.FY_ACC_SYNCHRONIZED&&(c.accessFlags&FyConst.FY_ACC_STATIC?this.monitorExit(context.getClassObjectHandle(c.owner)):this.monitorExit(this.stack[this.getCurrentStackBase()])),
c.accessFlags&FyConst.FY_ACC_CLINIT&&(c.owner.clinitThreadId=-1),this.popFrame(),this.framePos>=this.STACK_SIZE)throw new FyException(void 0,"Uncatched exception: "+this.context.heap.getObject(this.currentThrowable).clazz);b=c.invoke(this.context,this,b);this.yield&&(b=0)}this.yield=!1};FyThread.prototype.nativeReturn=function(a){this.sp+=a|0};FyThread.prototype.nativeReturnInt=function(a){this.stack[this.sp++]=a};FyThread.prototype.nativeReturnFloat=function(a){this.floatStack[this.sp++]=a};FyThread.prototype.nativeReturnDouble=
function(a){FyPortable.doubleToIeee64(a,this.stack,this.sp);this.sp+=2};FyThread.prototype.nativeReturnLong=function(a,b){this.stack[this.sp++]=a[b];this.stack[this.sp++]=a[b+1]};FyThread.prototype.monitorEnter=function(a){this.context.threadManager.monitorEnter(this,a)};FyThread.prototype.monitorExit=function(a){this.context.threadManager.monitorExit(this,a)}})();var FyThreadManager;
(function(){FyThreadManager=function(a){this.context=a;this.pricmds=[0,100,250,500,1E3,2E3,4E3,8E3,16E3,32E3,64E3];this.threads=Array(FyConfig.maxThreads);this.currentThread=void 0;this.runningThreads=[];this.runningThreadPos=0;this.nonDaemonRunned=!1;this.nextWakeUpTimeTotal=this.state=0;this.nextThreadId=1;this.exitException=void 0;this.lastThreadId=this.nextForceGCTime=this.nextGCTime=this.exitCode=0;Object.preventExtensions(this)};FyThreadManager.prototype._getThreadByHandle=function(a){a=this.context.heap.getObject(a).multiUsageData;
return 0===a?void 0:this.threads[a]};FyThreadManager.prototype._monitorEnter=function(a,b,c){var d=this.context.heap.getObject(b),e=d.monitorOwnerId,g=a.threadId;e===g?d.monitorOwnerTimes+=c:0>=e?(d.monitorOwnerId=g,d.monitorOwnerTimes=c):(a.waitForLockId=b,a.pendingLockCount=1,a.yield=!0);return c};FyThreadManager.prototype._monitorExit=function(a,b,c){var d=a.threadId,e=this.context.heap.getObject(b);if(e.monitorOwnerId!==d)throw new FyException(FyConst.FY_EXCEPTION_MONITOR,"Thread #"+d+": tries to exit monitor "+
b+" owned by #"+e.monitorOwnerId);e.monitorOwnerTimes-=c;if(0===e.monitorOwnerTimes)e.monitorOwnerId=0,a.yield=!0;else if(0>e.monitorOwnerTimes)throw new FyException(FyConst.FY_EXCEPTION_MONITOR,"Thread #"+d+": Too many monitors released!("+c+"/"+(e.monitorOwnerTimes+c)+")");return c};FyThreadManager.prototype._releaseMonitor=function(a,b){var c=a.threadId,d=this.context.heap.getObject(b);if(d.monitorOwnerId!==c)throw new FyException(FyConst.FY_EXCEPTION_MONITOR,"Thread #"+c+": tries to release monitor owned by #"+
d.monitorOwnerId);return this._monitorExit(a,b,d.monitorOwnerTimes)};FyThreadManager.prototype._fetchNextThreadId=function(){for(var a=this.nextThreadId;void 0!==this.threads[a];)if(a++,a===FyConfig.maxThreads&&(a=1),a===this.nextThreadId)throw new FyException(void 0,"Threads used up!");this.nextThreadId=a%(FyConfig.maxThreads-1)+1;return a};FyThreadManager.prototype.pushThrowable=function(a,b){var c=this.context,d=c.heap;a&&b.clazz||c.panic("Fatal error occored: "+b.message,b);try{var e=c.lookupClass(b.clazz);
if(!c.classLoader.canCast(e,c.TOP_THROWABLE))throw new FyException(void 0,"Exception "+b.clazz+" is not a "+c.TOP_THROWABLE);var g=c.getField(FyConst.FY_BASE_THROWABLE+".detailMessage.L"+FyConst.FY_BASE_STRING+";");a.currentThrowable=d.allocate(c.lookupClass(b.clazz));b.message&&d.putFieldString(a.currentThrowable,g.posAbs,b.message);a.fillStackTrace(a.currentThrowable,!1)}catch(f){c.panic("Exception occored while processing exception: "+b,f)}};FyThreadManager.prototype.monitorEnter=function(a,b){this._monitorEnter(a,
b,1)};FyThreadManager.prototype.monitorExit=function(a,b){this._monitorExit(a,b,1)};FyThreadManager.prototype.sleep=function(a,b){a.nextWakeTime=Date.now()+b;a.yield=!0};FyThreadManager.prototype.interrupt=function(a){a=this._getThreadByHandle(a);void 0!==a&&(0<a.nextWakeTime&&(this.pushThrowable(a,new FyException(FyConst.FY_EXCEPTION_INTR,"interrupted")),a.nextWakeTime=0),a.interrupted=!0)};FyThreadManager.prototype.isInterrupted=function(a,b){var c=this._getThreadByHandle(a);if(void 0===c)return!1;
var d=c.interrupted;b&&(c.interrupted=!1);return d};FyThreadManager.prototype.wait=function(a,b,c){var d=this.context.heap.getObject(b);if(d.monitorOwnerId!==a.threadId)throw new FyException(FyConst.FY_EXCEPTION_IMSE,a.threadId+"/"+d.monitorOwnerId);a.waitForNotifyId=b;a.pendingLockCount=this._releaseMonitor(a,b);a.nextWakeTime=0>=c?0x7fffffffffff:Date.now()+c;a.yield=!0};FyThreadManager.prototype.notify=function(a,b,c){var d=this.context.heap.getObject(b);if(d.monitorOwnerId!==a.threadId)throw new FyException(FyConst.FY_EXCEPTION_IMSE,
a.threadId+"/"+d.monitorOwnerId);for(d=this.runningThreads.length-1;0<=d&&(a=this.runningThreads[d],void 0===a||a.waitForNotifyId!==b||(a.waitForNotifyId=0,a.waitForLockId=b,a.nextWakeTime=0,c));d--);};FyThreadManager.prototype.isAlive=function(a){return void 0!==this._getThreadByHandle(a)};FyThreadManager.prototype.destroyThread=function(a){a.destroyPending=!0};FyThreadManager.prototype.bootFromMain=function(a){var b=this.context,c=b.heap,d,e,g,f,h;if(this.state!==FyConst.FY_TM_STATE_NEW)throw new FyException(void 0,
"Status is not new while booting! ("+this.state+")");d=b.lookupClass(FyClassLoader.getArrayName(FyConst.FY_PRIM_CHAR));d=c.allocateArray(d,a.name.length+5);c.putArrayChar(d,0,77);c.putArrayChar(d,1,97);c.putArrayChar(d,2,105);c.putArrayChar(d,3,110);c.putArrayChar(d,4,46);for(g=0;g<a.name.length;g++)c.putArrayChar(d,g+5,a.name.charCodeAt(g));e=b.lookupClass(FyConst.FY_BASE_THREAD);g=b.lookupFieldVirtual(e,FyConst.FY_FIELDF_NAME);f=b.lookupFieldVirtual(e,FyConst.FY_FIELDF_PRIORITY);h=b.lookupMethodVirtual(a,
FyConst.FY_METHODF_MAIN);if(void 0===h)throw new FyException(FyConst.FY_EXCEPTION_NO_METHOD,"Class "+a.name+" contains no main method");a=this._fetchNextThreadId();b=new FyThread(b,FyConfig.stackSize);e=c.allocate(e);c.putFieldRaw(e,g.posAbs,d);c.putFieldInt(e,f.posAbs,5);b.threadId=a;this.threads[a]=b;b.priority=5;b.initWithMethod(e,h);this.runningThreads.push(b);this.state=FyConst.FY_TM_STATE_RUN_PENDING;this.nextGCTime=Date.now()+FyConfig.gcIdv;this.nextForceGCTime=Date.now()+FyConfig.gcForceIdv};
FyThreadManager.prototype.pushThread=function(a){var b=this.context,c=b.heap,d,e;if(this.state!==FyConst.FY_TM_STATE_RUNNING&&this.state!==FyConst.FY_TM_STATE_STOP_PENDING)throw new FyException(void 0,"Status is not RUNNING or STOP_PENDING while adding thread!("+this.state+")");d=b.lookupClass(FyConst.FY_BASE_THREAD);e=b.lookupFieldVirtual(d,FyConst.FY_FIELDF_DAEMON);d=b.lookupFieldVirtual(d,FyConst.FY_FIELDF_PRIORITY);d=c.getFieldInt(a,d.posAbs);e=c.getFieldBoolean(a,e.posAbs);c=this._fetchNextThreadId();
b=new FyThread(b,FyConfig.stackSize);b.threadId=c;this.threads[c]=b;b.priority=d;b.daemon=e;b.initWithRun(a);this.runningThreads.push(b)};FyThreadManager.prototype.run=function(a){var b,c=this.runningThreads,d;if(this.state!==FyConst.FY_TM_STATE_RUN_PENDING&&this.state!==FyConst.FY_TM_STATE_RUNNING&&this.state!==FyConst.FY_TM_STATE_STOP_PENDING)throw new FyException(void 0,"Illegal VM status "+this.state);for(this.state=FyConst.FY_TM_STATE_RUNNING;;)switch(a.type=FyMessage.message_none,b=this.state|
0,b){case FyConst.FY_TM_STATE_RUNNING:if(0<c.length)if(this.runningThreadPos<c.length){b=c[this.runningThreadPos];if(b.destroyPending){b.destroy();c.splice(this.runningThreadPos,1);this.threads[b.threadId]=void 0;break}this.runningThreadPos++;b.daemon||(this.nonDaemonRunned=!0);d=b.nextWakeTime;if(d>Date.now()){this.nextWakeUpTimeTotal>d&&(this.nextWakeUpTimeTotal=d);break}this.nextWakeUpTimeTotal=b.nextWakeTime=0;d=b.waitForLockId;if(0<d)if(d=this.context.heap.getObject(d),0>=d.monitorOwnerId)d.monitorOwnerId=
b.threadId,d.monitorOwnerTimes=b.pendingLockCount,b.waitForLockId=0;else{if(d.monitorOwnerId==b.threadId)throw new FyException(void 0,"Illegal monitorHolder for thread "+b.threadId);break}this.lastThreadId=b.threadId;b.run(a,this.pricmds[b.priority]);this.context.heap.endProtect();switch(a.type){case FyMessage.message_continue:case FyMessage.message_vm_dead:case FyMessage.message_sleep:this.context.panic("Illegal message type "+a.type);case FyMessage.message_none:break;case FyMessage.message_exception:case FyMessage.message_invoke_native:this.context.panic("Illegal message type "+
a.type);case FyMessage.message_thread_dead:b.destroyPending=!0;break;default:this.context.panic("Illegal message type "+a.type)}}else if(this.nonDaemonRunned){b=Date.now();d=this.nextWakeUpTimeTotal-b;if(10<d&&b>this.nextGCTime||b>this.nextForceGCTime)this.nextGCTime=b+FyConfig.gcIdv,this.nextForceGCTime=this.nextGCTime+FyConfig.gcForceIdv,this.context.log(0,"Call GC due to timeout"),this.context.heap.gc(),b=Date.now(),d=this.nextWakeUpTimeTotal-b;this.nextWakeUpTimeTotal=0x7fffffffffff;this.runningThreadPos=
0;this.nonDaemonRunned=!1;if(0<d){a.type=FyMessage.message_sleep;a.sleepTime=d;return}}else this.state=FyConst.FY_TM_STATE_DEAD;else this.state=FyConst.FY_TM_STATE_DEAD;break;case FyConst.FY_TM_STATE_STOP_PENDING:this.runningThreadPos=0;this.state=FyConst.FY_TM_STATE_STOP;break;case FyConst.FY_TM_STATE_DEAD_PENDING:this.state=FyConst.FY_TM_STATE_DEAD;break;case FyConst.FY_TM_STATE_DEAD:a.type=FyMessage.message_vm_dead;return;default:this.context.panic("Illegal vm state "+b)}}})();var __FyAOTUtil;
(function(){function a(a,b,c,d){a=a.replace(/\$ip/g,b).replace(/\$1/g,c).replace(/\$2/g,d);FyConfig.verboseMode||(a=a.replace(/\"\#\!\".*?\"\!\#\"\;/g,""));return a}function b(a){return eval("(function(){return function(context, thread,ops){"+a+"};})();")}var c={NOP:0,ACONST_NULL:1,ICONST_M1:2,ICONST_0:3,ICONST_1:4,ICONST_2:5,ICONST_3:6,ICONST_4:7,ICONST_5:8,LCONST_0:9,LCONST_1:10,FCONST_0:11,FCONST_1:12,FCONST_2:13,DCONST_0:14,DCONST_1:15,BIPUSH:16,SIPUSH:17,LDC:18,LDC_W:19,LDC2_W:20,ILOAD:21,LLOAD:22,
FLOAD:23,DLOAD:24,ALOAD:25,ILOAD_0:26,ILOAD_1:27,ILOAD_2:28,ILOAD_3:29,LLOAD_0:30,LLOAD_1:31,LLOAD_2:32,LLOAD_3:33,FLOAD_0:34,FLOAD_1:35,FLOAD_2:36,FLOAD_3:37,DLOAD_0:38,DLOAD_1:39,DLOAD_2:40,DLOAD_3:41,ALOAD_0:42,ALOAD_1:43,ALOAD_2:44,ALOAD_3:45,IALOAD:46,LALOAD:47,FALOAD:48,DALOAD:49,AALOAD:50,BALOAD:51,CALOAD:52,SALOAD:53,ISTORE:54,LSTORE:55,FSTORE:56,DSTORE:57,ASTORE:58,ISTORE_0:59,ISTORE_1:60,ISTORE_2:61,ISTORE_3:62,LSTORE_0:63,LSTORE_1:64,LSTORE_2:65,LSTORE_3:66,FSTORE_0:67,FSTORE_1:68,FSTORE_2:69,
FSTORE_3:70,DSTORE_0:71,DSTORE_1:72,DSTORE_2:73,DSTORE_3:74,ASTORE_0:75,ASTORE_1:76,ASTORE_2:77,ASTORE_3:78,IASTORE:79,LASTORE:80,FASTORE:81,DASTORE:82,AASTORE:83,BASTORE:84,CASTORE:85,SASTORE:86,POP:87,POP2:88,DUP:89,DUP_X1:90,DUP_X2:91,DUP2:92,DUP2_X1:93,DUP2_X2:94,SWAP:95,IADD:96,LADD:97,FADD:98,DADD:99,ISUB:100,LSUB:101,FSUB:102,DSUB:103,IMUL:104,LMUL:105,FMUL:106,DMUL:107,IDIV:108,LDIV:109,FDIV:110,DDIV:111,IREM:112,LREM:113,FREM:114,DREM:115,INEG:116,LNEG:117,FNEG:118,DNEG:119,ISHL:120,LSHL:121,
ISHR:122,LSHR:123,IUSHR:124,LUSHR:125,IAND:126,LAND:127,IOR:128,LOR:129,IXOR:130,LXOR:131,IINC:132,I2L:133,I2F:134,I2D:135,L2I:136,L2F:137,L2D:138,F2I:139,F2L:140,F2D:141,D2I:142,D2L:143,D2F:144,I2B:145,I2C:146,I2S:147,LCMP:148,FCMPL:149,FCMPG:150,DCMPL:151,DCMPG:152,IFEQ:153,IFNE:154,IFLT:155,IFGE:156,IFGT:157,IFLE:158,IF_ICMPEQ:159,IF_ICMPNE:160,IF_ICMPLT:161,IF_ICMPGE:162,IF_ICMPGT:163,IF_ICMPLE:164,IF_ACMPEQ:165,IF_ACMPNE:166,GOTO:167,JSR:168,RET:169,TABLESWITCH:170,LOOKUPSWITCH:171,IRETURN:172,
LRETURN:173,FRETURN:174,DRETURN:175,ARETURN:176,RETURN:177,GETSTATIC:178,PUTSTATIC:179,GETFIELD:180,PUTFIELD:181,INVOKEVIRTUAL:182,INVOKESPECIAL:183,INVOKESTATIC:184,INVOKEINTERFACE:185,UNUSED_BA:186,NEW:187,NEWARRAY:188,ANEWARRAY:189,ARRAYLENGTH:190,ATHROW:191,CHECKCAST:192,INSTANCEOF:193,MONITORENTER:194,MONITOREXIT:195,WIDE:196,MULTIANEWARRAY:197,IFNULL:198,IFNONNULL:199,GOTO_W:200,JSR_W:201,BREAKPOINT:202},d=[];(function(){for(var a in c)d[c[a]]=a})();__FyAOTUtil=function(a){this.template=a};
__FyAOTUtil.prototype.aot=function(c){var g=this.template.macros,f=this.template.ops,h=c.code.length/3,l=[],n=c.opsCheck,p=g.OPS.toString();l.push(g.HEADER.toString());l.push("\n");for(var m=0;m<h;m++){var r=3*m,s=c.code[r],q=c.code[r+1],r=c.code[r+2],k=d[s];if(!k)throw new FyException(void 0,"Error in preprocessing "+c.uniqueName+": Unknown opcode: "+s);s=f[k];if(!s)throw new FyException(void 0,"Error in preprocessing "+c.uniqueName+": Opcode "+k+" is not implemented");l.push("case ");l.push(m);
l.push(": ");FyConfig.debugMode&&(l.push("// "),l.push(k),l.push(" "),l.push(q),l.push(" "),l.push(r));l.push("\n");FyConfig.verboseMode&&l.push("console.log([thread.threadId,this.owner, this.uniqueName,this,"+m+', thread.sp, "'+k+'", '+q+", "+(q?"clazz.constants["+q+"]":"undefined")+", "+r+", "+(r?"clazz.constants["+r+"]":"undefined")+", sb, sp, stack.subarray(sb,sb+this.maxLocals+this.maxStack)]);\n");0===m&&c.name===FyConst.FY_METHOD_CLINIT&&l.push(a(g.CLINIT,m,q,r));n[m]&&l.push(a(p,m,q,r));l.push(a(s.code,
m,q,r));l.push("\n")}l.push(g.TAIL.toString());g=l.join("").toString();if(FyConfig.debugMode&&0<=g.indexOf("$"))throw console.log(g),new FyException(void 0,"method.sample.js should not have content begins with '$' except $ip $1 $2");c.invoke=b(g)}})();
var FyAOTUtil=new __FyAOTUtil({ops:{AALOAD:{code:"lip = $ip;ops--;sp--;stack[sp - 1] = heap.getArrayInt(stack[sp - 1], stack[sp]);",pops:"-2",pushes:"1"},FALOAD:{code:"lip = $ip;ops--;sp--;stack[sp - 1] = heap.getArrayInt(stack[sp - 1], stack[sp]);",pops:"-2",pushes:"1"},IALOAD:{code:"lip = $ip;ops--;sp--;stack[sp - 1] = heap.getArrayInt(stack[sp - 1], stack[sp]);",pops:"-2",pushes:"1"},AASTORE:{code:'lip = $ip;ops--;sp -= 3;if (stack[sp + 2] !== 0&& (!context.classLoader.canCast(heap.getObject(stack[sp + 2]).clazz,heap.getObject(stack[sp + 0]).clazz.contentClass))) {throw new FyException(FyConst.FY_EXCEPTION_STORE,"Can\'t store "+ heap.getObject(stack[sp + 2]).clazz.name+ " to "+ heap.getObject(stack[sp + 0]).clazz.name);}heap.putArrayInt(stack[sp + 0], stack[sp + 1],stack[sp + 2]);',
pops:"-3",pushes:"0"},FASTORE:{code:"lip = $ip;ops--;sp -= 3;heap.putArrayInt(stack[sp + 0], stack[sp + 1],stack[sp + 2]);",pops:"-3",pushes:"0"},IASTORE:{code:"lip = $ip;ops--;sp -= 3;heap.putArrayInt(stack[sp + 0], stack[sp + 1],stack[sp + 2]);",pops:"-3",pushes:"0"},ACONST_NULL:{code:"ops--;stack[sp] = 0;sp++;",pops:"0",pushes:"1"},ILOAD:{code:'ops--;stack[sp] = stack[sb + $1];"#!";console.log([ sp, "<==", sb + $1, stack[sp], "<==",stack[sb + $1] ]);"!#";sp++;',pops:"0",pushes:"1"},FLOAD:{code:'ops--;stack[sp] = stack[sb + $1];"#!";console.log([ sp, "<==", sb + $1, stack[sp], "<==",stack[sb + $1] ]);"!#";sp++;',
pops:"0",pushes:"1"},ALOAD:{code:'ops--;stack[sp] = stack[sb + $1];"#!";console.log([ sp, "<==", sb + $1, stack[sp], "<==",stack[sb + $1] ]);"!#";sp++;',pops:"0",pushes:"1"},ANEWARRAY:{code:'lip = $ip;ops--;if (stack[sp - 1] < 0) {throw new FyException(FyConst.FY_EXCEPTION_AIOOB, ""+ stack[sp - 1]);}stack[sp - 1] = heap.allocateArray(context.lookupArrayClass(context.lookupClassFromConstant(constants[$1])),stack[sp - 1]);',pops:"-1",pushes:"1"},IRETURN:{code:'lip = $ip;ops--;if (this.accessFlags & FyConst.FY_ACC_SYNCHRONIZED) {if (this.accessFlags & FyConst.FY_ACC_STATIC) {thread.monitorExit(context.getClassObjectHandle(clazz));} else {thread.monitorExit(stack[sb]);}}stack[sb] = stack[sp - 1];"#!";console.log(stack[sb]);"!#";thread.popFrame(1);return ops;',
pops:"-1",pushes:"0"},FRETURN:{code:'lip = $ip;ops--;if (this.accessFlags & FyConst.FY_ACC_SYNCHRONIZED) {if (this.accessFlags & FyConst.FY_ACC_STATIC) {thread.monitorExit(context.getClassObjectHandle(clazz));} else {thread.monitorExit(stack[sb]);}}stack[sb] = stack[sp - 1];"#!";console.log(stack[sb]);"!#";thread.popFrame(1);return ops;',pops:"-1",pushes:"0"},ARETURN:{code:'lip = $ip;ops--;if (this.accessFlags & FyConst.FY_ACC_SYNCHRONIZED) {if (this.accessFlags & FyConst.FY_ACC_STATIC) {thread.monitorExit(context.getClassObjectHandle(clazz));} else {thread.monitorExit(stack[sb]);}}stack[sb] = stack[sp - 1];"#!";console.log(stack[sb]);"!#";thread.popFrame(1);return ops;',
pops:"-1",pushes:"0"},ARRAYLENGTH:{code:"lip = $ip;ops--;stack[sp - 1] = heap.arrayLength(stack[sp - 1]);",pops:"-1",pushes:"1"},ISTORE:{code:'ops--;sp--;stack[sb + $1] = stack[sp];"#!";console.log([ sp, "==>", sb + $1, stack[sp], "==>",stack[sb + $1] ]);"!#";',pops:"-1",pushes:"0"},FSTORE:{code:'ops--;sp--;stack[sb + $1] = stack[sp];"#!";console.log([ sp, "==>", sb + $1, stack[sp], "==>",stack[sb + $1] ]);"!#";',pops:"-1",pushes:"0"},ASTORE:{code:'ops--;sp--;stack[sb + $1] = stack[sp];"#!";console.log([ sp, "==>", sb + $1, stack[sp], "==>",stack[sb + $1] ]);"!#";',
pops:"-1",pushes:"0"},ATHROW:{code:"ops--;sp--;thread.currentThrowable = stack[sp];lip = $ip;ip = -1;break __fy_outer;",pops:"-1",pushes:"0"},BALOAD:{code:"lip = $ip;ops--;sp--;stack[sp - 1] = heap.getArrayByte(stack[sp - 1], stack[sp]);",pops:"-2",pushes:"1"},BASTORE:{code:"lip = $ip;ops--;sp -= 3;heap.putArrayByte(stack[sp], stack[sp + 1],stack[sp + 2] & 0xff);",pops:"-3",pushes:"0"},BIPUSH:{code:"ops--;stack[sp] = $1;sp++;",pops:"0",pushes:"1"},CALOAD:{code:"lip = $ip;ops--;sp--;stack[sp - 1] = heap.getArrayChar(stack[sp - 1], stack[sp]);",
pops:"-2",pushes:"1"},CASTORE:{code:"lip = $ip;ops--;sp -= 3;heap.putArrayChar(stack[sp], stack[sp + 1],stack[sp + 2] & 0xff);",pops:"-3",pushes:"0"},CHECKCAST:{code:'lip = $ip;ops--;if (stack[sp - 1] !== 0) {if (!context.classLoader.canCast(heap.getObject(stack[sp - 1]).clazz, context.lookupClassFromConstant(constants[$1]))) {throw new FyException(FyConst.FY_EXCEPTION_CAST,"Can\'t case "+ heap.getObject(stack[sp - 1]).clazz.name+ " to "+ context.lookupClassFromConstant(constants[$1]).name);}}',pops:"-1",
pushes:"0"},D2F:{code:"ops--;sp--;stack[sp - 1] = FyPortable.floatToIeee32(FyPortable.ieee64ToDouble(stack, sp - 1));",pops:"-2",pushes:"1"},D2I:{code:"ops--;sp--;stack[sp - 1] = FyPortable.ieee64ToDouble(stack, sp - 1) >> 0;",pops:"-2",pushes:"1"},D2L:{code:"ops--;FyPortable.doubleToLong(FyPortable.ieee64ToDouble(stack,sp - 2), stack, sp - 2);",pops:"-2",pushes:"2"},DADD:{code:"ops--;sp -= 2;FyPortable.doubleToIeee64(FyPortable.ieee64ToDouble(stack,sp - 2)+ FyPortable.ieee64ToDouble(stack, sp), stack,sp - 2);",
pops:"-4",pushes:"2"},LALOAD:{code:"lip = $ip;ops--;heap.getArrayRawLongTo(stack[sp - 2], stack[sp - 1], stack,sp - 2);",pops:"-2",pushes:"2"},DALOAD:{code:"lip = $ip;ops--;heap.getArrayRawLongTo(stack[sp - 2], stack[sp - 1], stack,sp - 2);",pops:"-2",pushes:"2"},LASTORE:{code:"lip = $ip;ops--;sp -= 4;heap.putArrayRawLongFrom(stack[sp], stack[sp + 1], stack,sp + 2);",pops:"-4",pushes:"0"},DASTORE:{code:"lip = $ip;ops--;sp -= 4;heap.putArrayRawLongFrom(stack[sp], stack[sp + 1], stack,sp + 2);",pops:"-4",
pushes:"0"},DCMPG:{code:"ops--;sp -= 3;stack[sp - 1] = FyPortable.dcmpg(FyPortable.ieee64ToDouble(stack, sp - 1), FyPortable.ieee64ToDouble(stack,sp + 1));",pops:"-4",pushes:"1"},DCMPL:{code:"ops--;sp -= 3;stack[sp - 1] = FyPortable.dcmpl(FyPortable.ieee64ToDouble(stack, sp - 1), FyPortable.ieee64ToDouble(stack,sp + 1));",pops:"-4",pushes:"1"},DCONST_0:{code:"ops--;FyPortable.doubleToIeee64(0.0, stack, sp);sp += 2;",pops:"0",pushes:"2"},DCONST_1:{code:"ops--;FyPortable.doubleToIeee64(1.0, stack, sp);sp += 2;",
pops:"0",pushes:"2"},DDIV:{code:"ops--;sp -= 2;FyPortable.doubleToIeee64(FyPortable.ieee64ToDouble(stack,sp - 2)/ FyPortable.ieee64ToDouble(stack, sp), stack,sp - 2);",pops:"-4",pushes:"2"},DMUL:{code:"ops--;sp -= 2;FyPortable.doubleToIeee64(FyPortable.ieee64ToDouble(stack,sp - 2)* FyPortable.ieee64ToDouble(stack, sp), stack,sp - 2);",pops:"-4",pushes:"2"},DNEG:{code:"ops--;FyPortable.doubleToIeee64(-FyPortable.ieee64ToDouble(stack,sp - 2), stack, sp - 2);",pops:"-2",pushes:"2"},DREM:{code:"ops--;sp -= 2;FyPortable.doubleToIeee64(FyPortable.ieee64ToDouble(stack,sp - 2)% FyPortable.ieee64ToDouble(stack, sp), stack,sp - 2);",
pops:"-4",pushes:"2"},DRETURN:{code:"lip = $ip;ops--;if (this.accessFlags & FyConst.FY_ACC_SYNCHRONIZED) {if (this.accessFlags & FyConst.FY_ACC_STATIC) {thread.monitorExit(context.getClassObjectHandle(clazz));} else {thread.monitorExit(stack[sb]);}}stack[sb] = stack[sp - 2];stack[sb + 1] = stack[sp - 1];thread.popFrame(2);return ops;",pops:"-2",pushes:"0"},LRETURN:{code:"lip = $ip;ops--;if (this.accessFlags & FyConst.FY_ACC_SYNCHRONIZED) {if (this.accessFlags & FyConst.FY_ACC_STATIC) {thread.monitorExit(context.getClassObjectHandle(clazz));} else {thread.monitorExit(stack[sb]);}}stack[sb] = stack[sp - 2];stack[sb + 1] = stack[sp - 1];thread.popFrame(2);return ops;",
pops:"-2",pushes:"0"},DSUB:{code:"ops--;sp -= 2;FyPortable.doubleToIeee64(FyPortable.ieee64ToDouble(stack,sp - 2)- FyPortable.ieee64ToDouble(stack, sp), stack,sp - 2);",pops:"-4",pushes:"2"},DUP:{code:"ops--;stack[sp] = stack[sp - 1];sp++;",pops:"-1",pushes:"2"},DUP_X1:{code:"ops--;stack[sp] = stack[sp - 1];stack[sp - 1] = stack[sp - 2];stack[sp - 2] = stack[sp];sp++;",pops:"-2",pushes:"3"},DUP_X2:{code:"ops--;stack[sp] = stack[sp - 1];stack[sp - 1] = stack[sp - 2];stack[sp - 2] = stack[sp - 3];stack[sp - 3] = stack[sp];sp++;",
pops:"-3",pushes:"4"},DUP2:{code:"ops--;stack[sp + 1] = stack[sp - 1];stack[sp] = stack[sp - 2];sp += 2;",pops:"-2",pushes:"4"},DUP2_X1:{code:"ops--;stack[sp + 1] = stack[sp - 1];stack[sp] = stack[sp - 2];stack[sp - 1] = stack[sp - 3];stack[sp - 2] = stack[sp + 1];stack[sp - 3] = stack[sp];sp += 2;",pops:"-3",pushes:"5"},DUP2_X2:{code:"ops--;stack[sp + 1] = stack[sp - 1];stack[sp] = stack[sp - 2];stack[sp - 1] = stack[sp - 3];stack[sp - 2] = stack[sp + 4];stack[sp - 3] = stack[sp + 1];stack[sp - 4] = stack[sp];sp += 2;",
pops:"-4",pushes:"6"},F2D:{code:"ops--;FyPortable.doubleToIeee64(floatStack[sp - 1], stack, sp - 1);sp++;",pops:"-1",pushes:"2"},F2I:{code:"ops--;stack[sp - 1] = floatStack[sp - 1] | 0;",pops:"-1",pushes:"1"},F2L:{code:"ops--;FyPortable.doubleToLong(floatStack[sp - 1], stack, sp - 1);sp++;",pops:"-1",pushes:"2"},FADD:{code:"ops--;sp--;floatStack[sp - 1] += floatStack[sp];",pops:"-2",pushes:"1"},FCMPG:{code:"ops--;sp--;stack[sp - 1] = FyPortable.dcmpg(floatStack[sp - 1],floatStack[sp]);",pops:"-2",
pushes:"1"},FCMPL:{code:"ops--;sp--;stack[sp - 1] = FyPortable.dcmpl(floatStack[sp - 1],floatStack[sp]);",pops:"-2",pushes:"1"},FCONST_0:{code:"ops--;floatStack[sp] = 0;sp++;",pops:"0",pushes:"1"},FCONST_1:{code:"ops--;floatStack[sp] = 1;sp++;",pops:"0",pushes:"1"},FCONST_2:{code:"ops--;floatStack[sp] = 2;sp++;",pops:"0",pushes:"1"},FDIV:{code:"ops--;sp--;floatStack[sp - 1] /= floatStack[sp];",pops:"-2",pushes:"1"},FMUL:{code:"ops--;sp--;floatStack[sp - 1] *= floatStack[sp];",pops:"-2",pushes:"1"},
FNEG:{code:"ops--;floatStack[sp - 1] = -floatStack[sp - 1];",pops:"-1",pushes:"1"},FREM:{code:"ops--;sp--;floatStack[sp - 1] %= floatStack[sp];",pops:"-2",pushes:"1"},FSUB:{code:"ops--;sp--;floatStack[sp - 1] -= floatStack[sp];",pops:"-2",pushes:"1"},GETFIELD:{code:'lip = $ip;ops--;tmpField = context.lookupFieldVirtualFromConstant(constants[$1]);if (tmpField.accessFlags & FyConst.FY_ACC_STATIC) {throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE, "Field "+ tmpField.uniqueName + " is static");}switch (tmpField.size) {case 2:heap.getFieldRawLongTo(stack[sp - 1],tmpField.posAbs | 0, stack, sp - 1);sp++;break;default:heap.getFieldRawTo(stack[sp - 1], tmpField.posAbs | 0,stack, sp - 1);break;}',
pops:"-1",pushes:"X-GETFIELD"},GETSTATIC:{code:'lip = $ip;ops--;tmpField = context.lookupFieldVirtualFromConstant(constants[$1]);if (!(tmpField.accessFlags & FyConst.FY_ACC_STATIC)) {throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE, "Field "+ tmpField.uniqueName+ " is not static");}clinitClass = thread.clinit(tmpField.owner);if (clinitClass !== undefined) {if (clinitClass.clinitThreadId == 0) {clinitClass.clinitThreadId = thread.threadId;thread.localToFrame(sp, $ip, $ip);thread.pushFrame(clinitClass.clinit);return ops;} else {ops = 0;ip = $ip;break __fy_outer;}}switch (tmpField.size) {case 2:heap.getStaticRawLongTo(tmpField.owner,tmpField.posAbs, stack, sp);sp += 2;break;default:heap.getStaticRawTo(tmpField.owner,tmpField.posAbs | 0, stack, sp | 0);sp++;break;}',
pops:"0",pushes:"X-GETSTATIC"},GOTO:{code:"ops--;ip = $1;break __fy_inner;",pops:"0",pushes:"0"},I2B:{code:"ops--;stack[sp - 1] &= 0xff;",pops:"-1",pushes:"1"},I2C:{code:"ops--;stack[sp - 1] &= 0xffff;",pops:"-1",pushes:"1"},I2D:{code:"ops--;FyPortable.doubleToIeee64(stack[sp - 1], stack, sp - 1);sp++;",pops:"-1",pushes:"2"},I2F:{code:"ops--;stack[sp - 1] = FyPortable.floatToIeee32(stack[sp - 1]);",pops:"-1",pushes:"1"},I2L:{code:"ops--;stack[sp] = stack[sp - 1];stack[sp - 1] = stack[sp] >= 0 ? (0 | 0) : (-1 | 0);sp++;",
pops:"-1",pushes:"2"},I2S:{code:"ops--;stack[sp - 1] = stack[sp - 1] << 16 >> 16;",pops:"-1",pushes:"1"},IADD:{code:"ops--;sp--;stack[sp - 1] += stack[sp];",pops:"-2",pushes:"1"},IAND:{code:"ops--;sp--;stack[sp - 1] &= stack[sp];",pops:"-2",pushes:"1"},ICONST_M1:{code:"ops--;stack[sp] = -1;sp++;",pops:"0",pushes:"1"},ICONST_0:{code:"ops--;stack[sp] = 0;sp++;",pops:"0",pushes:"1"},ICONST_1:{code:"ops--;stack[sp] = 1;sp++;",pops:"0",pushes:"1"},ICONST_2:{code:"ops--;stack[sp] = 2;sp++;",pops:"0",pushes:"1"},
ICONST_3:{code:"ops--;stack[sp] = 3;sp++;",pops:"0",pushes:"1"},ICONST_4:{code:"ops--;stack[sp] = 4;sp++;",pops:"0",pushes:"1"},ICONST_5:{code:"ops--;stack[sp] = 5;sp++;",pops:"0",pushes:"1"},IDIV:{code:'ops--;sp--;if (stack[sp] === 0) {lip = $ip;throw new FyException(FyConst.FY_EXCEPTION_ARITHMETIC,"Devided by zero!");}stack[sp - 1] = (stack[sp - 1] / stack[sp]) | 0;',pops:"-2",pushes:"1"},IF_ICMPEQ:{code:"ops--;sp -= 2;if (stack[sp] === stack[sp + 1]) {ip = $1;break __fy_inner;}",pops:"-2",pushes:"0"},
IF_ACMPEQ:{code:"ops--;sp -= 2;if (stack[sp] === stack[sp + 1]) {ip = $1;break __fy_inner;}",pops:"-2",pushes:"0"},IF_ICMPNE:{code:"ops--;sp -= 2;if (stack[sp] !== stack[sp + 1]) {ip = $1;break __fy_inner;}",pops:"-2",pushes:"0"},IF_ACMPNE:{code:"ops--;sp -= 2;if (stack[sp] !== stack[sp + 1]) {ip = $1;break __fy_inner;}",pops:"-2",pushes:"0"},IF_ICMPLT:{code:"ops--;sp -= 2;if (stack[sp] < stack[sp + 1]) {ip = $1;break __fy_inner;}",pops:"-2",pushes:"0"},IF_ICMPLE:{code:"ops--;sp -= 2;if (stack[sp] <= stack[sp + 1]) {ip = $1;break __fy_inner;}",
pops:"-2",pushes:"0"},IF_ICMPGT:{code:"ops--;sp -= 2;if (stack[sp] > stack[sp + 1]) {ip = $1;break __fy_inner;}",pops:"-2",pushes:"0"},IF_ICMPGE:{code:"ops--;sp -= 2;if (stack[sp] >= stack[sp + 1]) {ip = $1;break __fy_inner;}",pops:"-2",pushes:"0"},IFEQ:{code:"ops--;sp--;if (stack[sp] === 0) {ip = $1;break __fy_inner;}",pops:"-1",pushes:"0"},IFNULL:{code:"ops--;sp--;if (stack[sp] === 0) {ip = $1;break __fy_inner;}",pops:"-1",pushes:"0"},IFNE:{code:"ops--;sp--;if (stack[sp] !== 0) {ip = $1;break __fy_inner;}",
pops:"-1",pushes:"0"},IFNONNULL:{code:"ops--;sp--;if (stack[sp] !== 0) {ip = $1;break __fy_inner;}",pops:"-1",pushes:"0"},IFLT:{code:"ops--;sp--;if (stack[sp] < 0) {ip = $1;break __fy_inner;}",pops:"-1",pushes:"0"},IFLE:{code:"ops--;sp--;if (stack[sp] <= 0) {ip = $1;break __fy_inner;}",pops:"-1",pushes:"0"},IFGT:{code:"ops--;sp--;if (stack[sp] > 0) {ip = $1;break __fy_inner;}",pops:"-1",pushes:"0"},IFGE:{code:"ops--;sp--;if (stack[sp] >= 0) {ip = $1;break __fy_inner;}",pops:"-1",pushes:"0"},IINC:{code:"ops--;stack[sb + $1] += $2;",
pops:"0",pushes:"0"},IMUL:{code:"ops--;sp -= 1;stack[sp - 1] = Math.imul(stack[sp - 1], stack[sp]);",pops:"-2",pushes:"1"},INEG:{code:"ops--;stack[sp - 1] *= -1;",pops:"-1",pushes:"1"},INSTANCEOF:{code:"lip = $ip;ops--;if (stack[sp - 1] !== 0) {stack[sp - 1] = context.classLoader.canCast(heap.getObject(stack[sp - 1]).clazz, context.lookupClassFromConstant(constants[$1]));}",pops:"-1",pushes:"1"},INVOKESPECIAL:{code:'lip = $ip;ops--;tmpMethod = context.lookupMethodVirtualFromConstant(constants[$1]);sp -= tmpMethod.paramStackUsage + 1;"#!";(function() {var out = new Array(tmpMethod.paramStackUsage + 1);for ( var i = 0, max = tmpMethod.paramStackUsage + 1; i < max; i++) {out[i] = stack[sp + i];}console.log(out);})();"!#";tmpClass = tmpMethod.owner;if ((clazz.accessFlags & FyConst.FY_ACC_SUPER)&& context.classLoader.isSuperClassOf(tmpClass,clazz)&& tmpMethod.name === FyConst.FY_METHOD_INIT) {tmpMethod = context.lookupMethodVirtualByMethod(clazz.superClass, tmpMethod);}if (tmpMethod === undefined) {throw new FyException(FyConst.FY_EXCEPTION_ABSTRACT, "");}if (tmpMethod.name !== FyConst.FY_METHOD_INIT&& tmpMethod.owner !== tmpClass) {throw new FyException(FyConst.FY_EXCEPTION_NO_METHOD,tmpMethod.uniqueName);}if (tmpMethod.accessFlags & FyConst.FY_ACC_STATIC) {throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,tmpMethod.uniqueName);}if (tmpMethod.accessFlags & FyConst.FY_ACC_ABSTRACT) {throw new FyException(FyConst.FY_EXCEPTION_ABSTRACT,tmpMethod.uniqueName);}thread.localToFrame(sp, $ip, $ip + 1);if (tmpMethod.accessFlags & FyConst.FY_ACC_NATIVE) {if (tmpMethod.invoke) {heap.beginProtect();ops = tmpMethod.invoke(context, thread, ops);heap.endProtect();if (thread.yield) {ops = 0;}return ops;} else {throw new FyException(undefined,"Unresolved native handler for "+ tmpMethod.uniqueName);}} else {return thread.pushMethod(tmpMethod, ops);}',
pops:"X-INVOKESPECIAL",pushes:"0"},INVOKESTATIC:{code:'lip = $ip;ops--;tmpMethod = context.lookupMethodVirtualFromConstant(constants[$1]);"#!";(function() {var out = new Array(tmpMethod.paramStackUsage);for ( var i = 0, max = tmpMethod.paramStackUsage; i < max; i++) {out[i] = stack[sp - tmpMethod.paramStackUsage + i];}console.log(out);})();"!#";thread.localToFrame(sp, $ip, $ip + 1);return thread.invokeStatic(tmpMethod, ops);',pops:"X-INVOKESTATIC",pushes:"0"},INVOKEINTERFACE:{code:'lip = $ip;ops--;tmpMethod = context.lookupMethodVirtualFromConstant(constants[$1]);"#!";(function() {var out = new Array(tmpMethod.paramStackUsage);for ( var i = 0, max = tmpMethod.paramStackUsage + 1; i < max; i++) {out[i] = stack[sp - tmpMethod.paramStackUsage - 1+ i];}console.log(out);})();"!#";thread.localToFrame(sp, $ip, $ip + 1);return thread.invokeVirtual(tmpMethod, ops);',
pops:"X-INVOKEVIRTUAL",pushes:"0"},INVOKEVIRTUAL:{code:'lip = $ip;ops--;tmpMethod = context.lookupMethodVirtualFromConstant(constants[$1]);"#!";(function() {var out = new Array(tmpMethod.paramStackUsage);for ( var i = 0, max = tmpMethod.paramStackUsage + 1; i < max; i++) {out[i] = stack[sp - tmpMethod.paramStackUsage - 1+ i];}console.log(out);})();"!#";thread.localToFrame(sp, $ip, $ip + 1);return thread.invokeVirtual(tmpMethod, ops);',pops:"X-INVOKEVIRTUAL",pushes:"0"},IOR:{code:"ops--;sp--;stack[sp - 1] |= stack[sp];",
pops:"-2",pushes:"1"},IREM:{code:'lip = $ip;ops--;sp--;if (stack[sp] === 0) {throw new FyException(FyConst.FY_EXCEPTION_ARITHMETIC,"Devided by zero");}stack[sp - 1] %= stack[sp];',pops:"-2",pushes:"1"},ISHL:{code:"ops--;sp--;stack[sp - 1] <<= stack[sp];",pops:"-2",pushes:"1"},ISHR:{code:"ops--;sp--;stack[sp - 1] >>= stack[sp];",pops:"-2",pushes:"1"},ISUB:{code:"ops--;sp--;stack[sp - 1] -= stack[sp];",pops:"-2",pushes:"1"},IUSHR:{code:"ops--;sp--;stack[sp - 1] >>>= stack[sp];",pops:"-2",pushes:"1"},
IXOR:{code:"ops--;sp--;stack[sp - 1] >>>= stack[sp];",pops:"-2",pushes:"1"},L2D:{code:"ops--;FyPortable.doubleToIeee64(stack[sp - 2] * 4294967296.0+ stack[sp - 1], stack, sp - 2);",pops:"-2",pushes:"2"},L2F:{code:"ops--;sp--;stack[sp - 1] = FyPortable.floatToIeee32(stack[sp - 1]* 4294967296.0 + stack[sp]);",pops:"-2",pushes:"1"},L2I:{code:"ops--;sp--;stack[sp - 1] = stack[sp];",pops:"-2",pushes:"1"},LADD:{code:"ops--;sp -= 2;longOps.add(sp + 16 - 2, sp + 16);",pops:"-4",pushes:"2"},LAND:{code:"ops--;sp -= 2;stack[sp - 2] &= stack[sp];stack[sp - 1] &= stack[sp + 1];",
pops:"-4",pushes:"2"},LCMP:{code:"ops--;sp -= 3;longOps.cmp(sp + 15, sp + 17);stack[sp - 1] = stack[sp];",pops:"-4",pushes:"1"},LCONST_0:{code:"ops--;stack[sp] = 0;stack[sp + 1] = 0;sp += 2;",pops:"0",pushes:"2"},LCONST_1:{code:"ops--;stack[sp] = 0;stack[sp + 1] = 1;sp += 2;",pops:"0",pushes:"2"},LDC:{code:'ops--;switch ($2) {case 0:stack[sp] = constants[$1].value;"#!";console.log(stack[sp]);"!#";sp++;break;case 1:stack[sp] = constants[$1].value[0];stack[sp + 1] = constants[$1].value[1];"#!";console.log([ stack[sp], stack[sp + 1] ]);"!#";sp += 2;break;case 2:lip = $ip;stack[sp] = heap.literalWithConstant(constants[$1]);"#!";console.log([ constants[$1], stack[sp] ]);"!#";sp++;break;case 3:lip = $ip;stack[sp] = context.getClassObjectHandle(context.lookupClassFromConstant(constants[$1]));"#!";console.log([ constants[$1], stack[sp] ]);"!#";sp++;break;}',
pops:"0",pushes:"X-LDC"},LDIV:{code:'ops--;sp -= 2;if (stack[sp] === 0 && stack[sp + 1] === 0) {lip = $ip;throw new FyException(FyConst.FY_EXCEPTION_ARITHMETIC,"Devided by zero!");}longOps.div(sp + 14, sp + 16);',pops:"-4",pushes:"2"},DLOAD:{code:'ops--;"#!";console.log(sp + "<==" + (sb + $1) + " "+ [ stack[sb + $1], stack[sb + $1 + 1] ]);"!#";stack[sp] = stack[sb + $1];stack[sp + 1] = stack[sb + $1 + 1];sp += 2;',pops:"0",pushes:"2"},LLOAD:{code:'ops--;"#!";console.log(sp + "<==" + (sb + $1) + " "+ [ stack[sb + $1], stack[sb + $1 + 1] ]);"!#";stack[sp] = stack[sb + $1];stack[sp + 1] = stack[sb + $1 + 1];sp += 2;',
pops:"0",pushes:"2"},LMUL:{code:"ops--;sp -= 2;longOps.mul(sp + 14, sp + 16);",pops:"-4",pushes:"2"},LNEG:{code:"ops--;longOps.neg(sp + 14);",pops:"-2",pushes:"2"},LOOKUPSWITCH:{code:"ops--;sp--;var lookupSwitchTarget = this.lookupSwitchTargets[$1];tmpInt1 = ((lookupSwitchTarget.targets[stack[sp]] + 1) | 0) - 1;if (tmpInt1 === -1) {ip = lookupSwitchTarget.dflt;break __fy_inner;} else {ip = tmpInt1;break __fy_inner;}",pops:"-1",pushes:"0"},LOR:{code:"ops--;sp -= 2;stack[sp - 2] |= stack[sp];stack[sp - 1] |= stack[sp + 1];",
pops:"-4",pushes:"2"},LREM:{code:"ops--;sp -= 2;longOps.rem(sp + 14, sp + 16);",pops:"-4",pushes:"2"},LSHL:{code:"ops--;sp--;longOps.shl(sp + 14, stack[sp]);",pops:"-3",pushes:"2"},LSHR:{code:"ops--;sp--;longOps.shr(sp + 14, stack[sp]);",pops:"-3",pushes:"2"},LUSHR:{code:"ops--;sp--;longOps.ushr(sp + 14, stack[sp]);",pops:"-3",pushes:"2"},DSTORE:{code:"ops--;sp -= 2;stack[sb + $1] = stack[sp];stack[sb + $1 + 1] = stack[sp + 1];",pops:"-2",pushes:"0"},LSTORE:{code:"ops--;sp -= 2;stack[sb + $1] = stack[sp];stack[sb + $1 + 1] = stack[sp + 1];",
pops:"-2",pushes:"0"},LSUB:{code:"ops--;sp -= 2;longOps.sub(sp + 14, sp + 16);",pops:"-4",pushes:"2"},LXOR:{code:"ops--;sp -= 2;stack[sp - 2] ^= stack[sp];stack[sp - 1] ^= stack[sp + 1];",pops:"-4",pushes:"2"},MONITORENTER:{code:"ops--;sp--;thread.monitorEnter(stack[sp]);if (thread.yield) {thread.localToFrame(sp, $ip, $ip + 1);return 0;}",pops:"-1",pushes:"0"},MONITOREXIT:{code:"ops--;sp--;thread.monitorExit(stack[sp]);if (thread.yield) {thread.localToFrame(sp, $ip, $ip + 1);return 0;}",pops:"-1",
pushes:"0"},MULTIANEWARRAY:{code:"ops--;sp -= $2;lip = $ip;stack[sp] = heap.multiNewArray(context.lookupClassFromConstant(constants[$1]), $2, stack,sp);sp++;",pops:"X-MULTIANEWARRAY",pushes:"1"},NEW:{code:"ops--;lip = $ip;tmpClass = context.lookupClassFromConstant(constants[$1]);if (tmpClass.accessFlags& (FyConst.FY_ACC_INTERFACE | FyConst.FY_ACC_ABSTRACT)) {throw new FyException(FyConst.FY_EXCEPTION_ABSTRACT,tmpClass.name);}clinitClass = thread.clinit(tmpClass);if (clinitClass !== undefined) {if (clinitClass.clinitThreadId == 0) {clinitClass.clinitThreadId = thread.threadId;thread.localToFrame(sp, $ip, $ip);thread.pushFrame(clinitClass.clinit);return ops;} else {ops = 0;ip = $ip;break __fy_outer;}}stack[sp] = heap.allocate(tmpClass);sp++;",
pops:"0",pushes:"1"},NEWARRAY:{code:'switch ($1) {case 4:stack[sp - 1] = heap.allocateArray(context.lookupClass("[Z"), stack[sp - 1]);break;case 5:stack[sp - 1] = heap.allocateArray(context.lookupClass("[C"), stack[sp - 1]);break;case 6:stack[sp - 1] = heap.allocateArray(context.lookupClass("[F"), stack[sp - 1]);break;case 7:stack[sp - 1] = heap.allocateArray(context.lookupClass("[D"), stack[sp - 1]);break;case 8:stack[sp - 1] = heap.allocateArray(context.lookupClass("[B"), stack[sp - 1]);break;case 9:stack[sp - 1] = heap.allocateArray(context.lookupClass("[S"), stack[sp - 1]);break;case 10:stack[sp - 1] = heap.allocateArray(context.lookupClass("[I"), stack[sp - 1]);break;case 11:stack[sp - 1] = heap.allocateArray(context.lookupClass("[J"), stack[sp - 1]);break;default:throw new FyException(FyConst.FY_EXCEPTION_VM,"Unknown array type in NEWARRAY: $1");}',
pops:"-1",pushes:"1"},NOP:{code:"",pops:"0",pushes:"0"},POP:{code:"sp--;",pops:"-1",pushes:"0"},POP2:{code:"sp--;sp--;",pops:"-2",pushes:"0"},PUTFIELD:{code:'lip = $ip;ops--;tmpField = context.lookupFieldVirtualFromConstant(constants[$1 | 0]);if (tmpField.accessFlags & FyConst.FY_ACC_STATIC) {throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE, "Field "+ tmpField.uniqueName + " is static");}if ((tmpField.accessFlags & FyConst.FY_ACC_FINAL)&& (this.owner != tmpField.owner)) {throw new FyException(FyConst.FY_EXCEPTION_ACCESS,"Field " + tmpField.uniqueName + " is final");}switch (tmpField.size) {case 2:sp -= 3;heap.putFieldRawLongFrom(stack[sp], tmpField.posAbs,stack, sp + 1);break;default:sp -= 2;heap.putFieldRawFrom(stack[sp], tmpField.posAbs, stack,sp + 1);break;}',
pops:"X-PUTFIELD",pushes:"0"},PUTSTATIC:{code:'lip = $ip;ops--;tmpField = context.lookupFieldVirtualFromConstant(constants[$1]);if (tmpField.accessFlags & FyConst.FY_ACC_STATIC == 0) {throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE, "Field "+ tmpField.uniqueName+ " is not static");}if ((tmpField.accessFlags & FyConst.FY_ACC_FINAL)&& (this.owner != tmpField.owner)) {throw new FyException(FyConst.FY_EXCEPTION_ACCESS,"Field " + tmpField.uniqueName + " is final");}clinitClass = thread.clinit(tmpField.owner);if (clinitClass !== undefined) {if (clinitClass.clinitThreadId == 0) {clinitClass.clinitThreadId = thread.threadId;thread.localToFrame(sp, $ip, $ip);thread.pushFrame(clinitClass.clinit);return ops;} else {ops = 0;ip = $ip;break __fy_outer;}}switch (tmpField.size) {case 2:sp -= 2;heap.putStaticRawLongFrom(tmpField.owner,tmpField.posAbs, stack, sp);break;default:sp--;heap.putStaticRawFrom(tmpField.owner,tmpField.posAbs | 0, stack, sp | 0);break;}',
pops:"X-PUTSTATIC",pushes:"0"},RETURN:{code:"lip = $ip;ops--;if (this.accessFlags & FyConst.FY_ACC_SYNCHRONIZED) {if (this.accessFlags & FyConst.FY_ACC_STATIC) {thread.monitorExit(context.getClassObjectHandle(clazz));} else {thread.monitorExit(stack[sb]);}}if (this.accessFlags & FyConst.FY_ACC_CLINIT) {clazz.clinitThreadId = -1;}thread.popFrame();return ops;",pops:"0",pushes:"0"},SALOAD:{code:"lip = $ip;ops--;sp--;stack[sp - 1] = heap.getArrayShort(stack[sp - 1], stack[sp]);",pops:"-2",pushes:"1"},
SASTORE:{code:"lip = $ip;ops--;sp -= 3;heap.putArrayShort(stack[sp], stack[sp + 1], stack[sp + 2]);",pops:"-3",pushes:"0"},SIPUSH:{code:"ops--;stack[sp] = $1;sp++;",pops:"0",pushes:"1"},SWAP:{code:"ops--;tmpInt1 = stack[sp - 1];stack[sp - 1] = stack[sp - 2];stack[sp - 2] = tmpInt1;",pops:"-2",pushes:"2"},TABLESWITCH:{code:"ops--;sp--;var tableSwitchTarget = this.tableSwitchTargets[$1];if (stack[sp] < tableSwitchTarget.min|| stack[sp] > tableSwitchTarget.max) {ip = tableSwitchTarget.dflt;break __fy_inner;} else {ip = tableSwitchTarget.targets[stack[sp]- tableSwitchTarget.min];break __fy_inner;}",
pops:"-1",pushes:"0"}},macros:{HEADER:"var clazz = this.owner;var heap = context.heap;var longOps = thread.longOps;var constants = clazz.constants;var stack = thread.stack;var floatStack = thread.floatStack;var ip = thread.getCurrentIp() | 0;var lip = 0 | 0;var sp = thread.sp | 0;var sb = thread.getCurrentStackBase() | 0;var tmpField;var tmpClass;var clinitClass;var tmpMethod;var tmpInt1 = 0 | 0;__fy_outer: while (true) {try {__fy_inner: switch (ip) {",CLINIT:"clinitClass = thread.clinit(this.owner.superClass);if (clinitClass !== undefined) {if (clinitClass.clinitThreadId == 0) {clinitClass.clinitThreadId = thread.threadId;thread.localToFrame(sp, $ip, $ip);thread.pushFrame(clinitClass.clinit);return ops;} else {ops = 0;ip = $ip;break __fy_outer;}}",
OPS:"if (ops < 0) {lip = $ip;ip = $ip;break __fy_outer;}",TAIL:'default:throw new FyException(undefined, "IP out of sync at "+ this.uniqueName + "." + ip);}} catch (e) {if (e instanceof FyException) {context.threadManager.pushThrowable(thread, e);break __fy_outer;} else {context.panic("Exception occored while executing thread #"+ thread.threadId, e);}}}thread.localToFrame(sp, lip, ip);return ops;'}});
(function(){function a(a,b,c){b.nativeReturn(2);return c}function b(a,b,c){b.nativeReturn(1);return c-1}var c=[];FyContext.registerStaticNH("com/cirnoworks/fisce/privat/SystemInputStream.read0.()I",function(a,b,c){b.nativeReturnInt(0);return c-1});FyContext.registerStaticNH("com/cirnoworks/fisce/privat/SystemOutputStream.write0.(IL"+FyConst.FY_BASE_STRING+";)V",function(a,b,g){a=b.stack;var f=b.sp;10===a[f+1]||13===a[f+1]?(console.log(String.fromCharCode.apply(void 0,c)),c=[]):(c.push(a[f+1]),132<=
c.length&&(console.log(String.fromCharCode.apply(void 0,c)),c=[]));b.nativeReturn();return g-1});FyContext.registerStaticNH(FyConst.FY_BASE_DOUBLE+".longBitsToDouble.(J)D",a);FyContext.registerStaticNH(FyConst.FY_BASE_FLOAT+".intBitsToFloat.(I)F",b);FyContext.registerStaticNH(FyConst.FY_BASE_STRING+".intern.()L"+FyConst.FY_BASE_STRING+";",function(a,b,c){var f=a.heap.getString(b.stack[b.sp]);b.nativeReturnInt(a.heap.literal(f));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_RUNTIME+".freeMemory.()J",
function(a,b,c){b.nativeReturnLong([0,0],0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_RUNTIME+".totalMemory.()J",function(a,b,c){b.nativeReturnLong([0,0],0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_RUNTIME+".maxMemory.()J",function(a,b,c){b.nativeReturnLong([0,0],0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".setIn0.(L"+FyConst.FY_IO_INPUTSTREAM+";)V",function(a,b,c){b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".setOut0.(L"+
FyConst.FY_IO_PRINTSTREAM+";)V",function(a,b,c){b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".setErr0.(L"+FyConst.FY_IO_PRINTSTREAM+";)V",function(a,b,c){b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".setProperty0.(L"+FyConst.FY_BASE_STRING+";L"+FyConst.FY_BASE_STRING+";)L"+FyConst.FY_BASE_STRING+";",function(a,b,c){b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".getProperty0.(L"+FyConst.FY_BASE_STRING+
";)L"+FyConst.FY_BASE_STRING+";",function(a,b,c){b.nativeReturnInt(0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".arraycopy.(L"+FyConst.FY_BASE_OBJECT+";IL"+FyConst.FY_BASE_OBJECT+";II)V",function(a,b,c){var f=b.stack,h=b.sp;a.heap.arrayCopy(f[h],f[h+1],f[h+2],f[h+3],f[h+4]);b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".currentTimeMillis.()J",function(a,b,c){a=b.stack;var f=b.sp;FyPortable.doubleToLong(FyPortable.now(),a,f);b.nativeReturn(2);
return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".nanoTime.()J",function(a,b,c){a=b.stack;var f=b.sp;FyPortable.doubleToLong(1E6*FyPortable.now(),a,f);b.nativeReturn(2);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".identityHashCode.(L"+FyConst.FY_BASE_OBJECT+";)I",function(a,b,c){b.nativeReturnInt(b.stack[b.sp]);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+".gc.()V",function(a,b,c){b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_SYSTEM+
".exit.(I)V",function(a,b,c){b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_OBJECT+".clone.()L"+FyConst.FY_BASE_OBJECT+";",function(a,b,c){b.nativeReturnInt(a.heap.clone(b.stack[b.sp]));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_OBJECT+".getClass.()L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){var f=a.heap.getObject(b.stack[b.sp]);b.nativeReturnInt(a.getClassObjectHandle(f.clazz));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_OBJECT+".wait.(J)V",function(a,
b,c){var f=b.sp;a.threadManager.wait(b,b.stack[f],b.longOps.longToNumber(f+16+1));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_OBJECT+".notify.()V",function(a,b,c){a.threadManager.notify(b,b.stack[b.sp],!1);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_OBJECT+".notifyAll.()V",function(a,b,c){a.threadManager.notify(b,b.stack[b.sp],!0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THROWABLE+".fillInStackTrace0.()V",function(a,b,c){b.fillStackTrace(b.stack[b.sp],!0);b.nativeReturn();
return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".logOut0.(IL"+FyConst.FY_BASE_STRING+";)V",function(a,b,c){var f=b.stack,h=b.sp,l=f[h],f=a.heap.getString(f[h+1]);a.log(l,f);b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".throwOut.(L"+FyConst.FY_BASE_THROWABLE+";)V",function(a,b,c){b.currentThrowable=b.stack[b.sp];a.panic("Explicted FiScEVM.throwOut called");b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".exit.(I)V",function(a,
b,c){a.panic("Exited with code: "+b.stack[b.sp]);b.nativeReturn();return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".decode.(L"+FyConst.FY_BASE_STRING+";[BII)[C",function(a,b,c){for(var f=b.stack,h=b.sp,l=f[h+1],n=f[h+2],f=f[h+3],p=Array(f),h=0,m=Array(f),h=0;h<f;h++)p[h]=a.heap.getArrayByte(l,h+n);for(h=n=0;n<f;)n+=FyUtils.utf8Decode(p,n,m,h),h++;for(l=a.heap.allocateArray(a.lookupClass("[C"),h);0<h;)h--,a.heap.putArrayChar(l,h,m[h]);b.nativeReturnInt(l);return c-f});FyContext.registerStaticNH(FyConst.FY_BASE_VM+
".encode.(L"+FyConst.FY_BASE_STRING+";[CII)[B",function(a,b,c){for(var f=b.stack,h=b.sp,l=f[h+1],n=f[h+2],f=f[h+3],h=0,p=Array(3*f),m=0;m<f;m++)h+=FyUtils.utf8Encode(a.heap.getArrayChar(l,m+n),p,h);l=a.heap.allocateArray(a.lookupClass("[B"),h);for(m=0;m<h;m++)a.heap.putArrayByte(l,m,p[m]);b.nativeReturnInt(l);return c-f});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".getDoubleRaw.(D)J",a);FyContext.registerStaticNH(FyConst.FY_BASE_VM+".getFloatRaw.(F)[I",b);FyContext.registerStaticNH(FyConst.FY_BASE_VM+
".stringToDouble.(L"+FyConst.FY_BASE_STRING+";)D",function(a,b,c){a=a.heap.getString(b.stack[b.sp]);b.nativeReturnDouble(Number(a));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".stringToFloat.(L"+FyConst.FY_BASE_STRING+";)F",function(a,b,c){a=a.heap.getString(b.stack[b.sp]);b.nativeReturnFloat(Number(a));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".floatToString.(F)L"+FyConst.FY_BASE_STRING+";",function(a,b,c){var f=FyPortable.ieee32ToFloat(b.stack[b.sp]).toString(),
h=a.heap.allocate(a.lookupClass(FyConst.FY_BASE_STRING));b.nativeReturnInt(h);a.heap.fillString(h,f);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".doubleToString.(D)L"+FyConst.FY_BASE_STRING+";",function(a,b,c){var f=FyPortable.ieee64ToDouble(b.stack,b.sp).toString(),h=a.heap.allocate(a.lookupClass(FyConst.FY_BASE_STRING));b.nativeReturnInt(h);a.heap.fillString(h,f);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_VM+".breakpoint.()V",function(a,b,c){b.nativeReturn();return c-
1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+".currentThread.()L"+FyConst.FY_BASE_THREAD+";",function(a,b,c){b.nativeReturnInt(b.handle);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+".setPriority0.(I)V",function(a,b,c){var f=b.stack;b=b.sp;if(a=a.threadManager._getThreadByHandle(f[b]))a.priority=f[b+1];return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+".isAlive.()Z",function(a,b,c){b.nativeReturnInt(a.threadManager.isAlive(b.stack[b.sp])?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+
".start0.()V",function(a,b,c){a.threadManager.pushThread(b.stack[b.sp]);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+".interrupt0.()V",function(a,b,c){a.threadManager.interrupt(b.stack[b.sp]);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+".isInterrupted.(Z)Z",function(a,b,c){var f=b.stack,h=b.sp;b.nativeReturnInt(a.threadManager.isInterrupted(f[h],f[h+1]?!0:!1)?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+".sleep.(J)V",function(a,b,c){a.threadManager.sleep(b,
b.longOps.longToNumber(b.sp+16));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_THREAD+".yield.()V",function(a,b,c){b.yield=!0;return 0});FyContext.registerStaticNH(FyConst.FY_BASE_FINALIZER+".getReferencesToEnqueue.()[L"+FyConst.FY_REF+";",function(a,b,c){b.nativeReturnInt(a.heap.allocateArray(a.lookupClass(FyClassLoader.getArrayName(FyConst.FY_BASE_OBJECT)),0));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_FINALIZER+".getFinalizee.()[L"+FyConst.FY_BASE_OBJECT+";",function(a,b,
c){b.nativeReturnInt(a.heap.allocateArray(a.lookupClass(FyClassLoader.getArrayName(FyConst.FY_BASE_OBJECT)),0));return c-1})})();
(function(){function a(a,b,c){a=a.getMethodFromMethodObject(b.stack[b.sp]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");b.nativeReturnInt(FyConst.FY_ACC_BRIDGE&a.accessFlags?1:0);return c-1}function b(a,b,c){a=a.getMethodFromMethodObject(b.stack[b.sp]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");b.nativeReturnInt(FyConst.FY_ACC_VARARGS&a.accessFlags?1:0);return c-1}function c(a,b,c){a=a.getMethodFromMethodObject(b.stack[b.sp]);
if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");b.nativeReturnInt(FyConst.FY_ACC_SYNTHETIC&a.accessFlags?1:0);return c-1}function d(a,b,c){var d=a.getMethodFromMethodObject(b.stack[b.sp]);if(void 0===d)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");b.nativeReturnInt(a.getClassObjectHandle(d.owner));return c-1}function e(a,b,c){var d=b.stack,e=b.sp,g=a.getMethodFromMethodObject(d[e]);if(void 0===g)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,
"Method not found!");var f=g.exceptionTable.length,h=a.heap.allocateArray(a.lookupClass(FyClassLoader.getArrayName(FyConst.FY_BASE_CLASS)),f);d[e]=h;for(d=0;d<f;d++)a.heap.putArrayInt(h,d,a.getClassObjectHandle(a.lookupClass(g.exceptions[d])));b.nativeReturn(1);return c-1}function g(a,b,c){a=a.getMethodFromMethodObject(b.stack[b.sp]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");b.nativeReturnInt(a.accessFlags);return c-1}function f(a,b,c){var d=a.getMethodFromMethodObject(b.stack[b.sp]);
if(void 0===d)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");b.nativeReturnInt(a.heap.literal(d.name));return c-1}function h(a,b,c){var d=b.stack,e=b.sp,g=a.getMethodFromMethodObject(d[e]);if(void 0===g)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");var f=g.parameterClassNames.length,h=a.heap.allocateArray(a.lookupClass(FyClassLoader.getArrayName(FyConst.FY_BASE_CLASS)),f);d[e]=h;for(d=0;d<f;d++)a.heap.putArrayInt(h,d,a.getClassObjectHandle(a.lookupClass(g.parameterClassNames[d])));
b.nativeReturn(1);return c-1}function l(a,b,c){var d=a.heap,e=b.stack,g=b.sp,f=g,h=e[g+2],k=a.getMethodFromMethodObject(e[g]);if(void 0===k)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");var l=h?d.arrayLength(h):0;if(l!==k.parameterCount)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method's params count changed");k.accessFlags&FyConst.FY_ACC_STATIC||(e[f++]=e[g+1]);for(g=0;g<l;g++){var n=a.lookupClass(k.parameterClassNames[g]),m=d.getArrayInt(h,g);if(n.type===
FyConst.TYPE_PRIMITIVE)switch(n.pType){case FyConst.Z:e[f++]=d.unwrapBoolean(m);break;case FyConst.B:e[f++]=d.unwrapByte(m);case FyConst.S:e[f++]=d.unwrapShort(m);case FyConst.C:e[f++]=d.unwrapChar(m);case FyConst.I:e[f++]=d.unwrapInt(m);case FyConst.F:e[f++]=d.unwrapFloatRaw(m);case FyConst.J:d.unwrapLong(m,e,f),f+=2;case FyConst.D:d.unwrapDoubleRaw(m,e,f);default:throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Illegal parameter type "+n.pType);}else e[f++]=m}b.sp=f;return k.accessFlags&FyConst.FY_ACC_STATIC?
b.invokeStatic(k,c-1):b.invokeVirtual(k,c-1)}function n(a,b,c){var d=a.getMethodFromMethodObject(b.stack[b.sp]);b.nativeReturnInt(a.heap.literal(d.uniqueName));return c-1}function p(a,b){return function(b,c,d){var e=b.heap,g=c.stack,f=c.sp,h=b.getFieldFromFieldObject(g[f]);if(void 0===h)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");if(h.type.type!==FyConst.TYPE_PRIMITIVE||h.type.pType!==v)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Field "+h.uniqueName+" is not "+
a+" typed");if(h.accessFlags&FyConst.FY_ACC_STATIC)c.nativeReturnInt(e.getStaticRaw(h.type,h.posAbs));else{var v=e.getObject(g[f+1]).clazz;if(!b.classLoader.canCast(v,h.owner))throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't cast from "+v.name+" to "+h.owner.name);c.nativeReturnInt(e.getFieldRaw(g[f+1],h.posAbs))}return d-1}}function m(a,b){return function(b,c,d){var e=b.heap,g=c.stack,f=c.sp,h=b.getFieldFromFieldObject(g[f]);if(void 0===h)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,
"Field not found!");if(h.type.type!==FyConst.TYPE_PRIMITIVE||h.type.pType!==v)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Field "+h.uniqueName+" is not "+a+" typed");if(h.accessFlags&FyConst.FY_ACC_STATIC)e.getStaticRawLongTo(h.type,h.posAbs,g,f);else{var v=e.getObject(g[f+1]).clazz;if(!b.classLoader.canCast(v,h.owner))throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't cast from "+v.name+" to "+h.owner.name);e.getFieldRawLongTo(g[f+1],h.posAbs,g,f)}c.nativeReturn(2);return d-1}}function r(a,
b,c){var d=a.heap,e=b.stack;b=b.sp;a=a.getFieldFromFieldObject(e[b]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");if(a.type.type!==FyConst.TYPE_PRIMITIVE)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field "+a.uniqueName+" is primitive");a.accessFlags&FyConst.FY_ACC_STATIC?d.putStaticInt(a.type,a.posAbs,e[b+2]):d.putFieldInt(e[b+1],a.posAbs,e[b+2]);return c-1}function s(a,b,c){var d=a.heap,e=b.stack;b=b.sp;a=a.getFieldFromFieldObject(e[b]);
if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");if(a.type.type!==FyConst.TYPE_PRIMITIVE)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field "+a.uniqueName+" is primitive");a.accessFlags&FyConst.FY_ACC_STATIC?d.putStaticRawLongFrom(a.type,a.posAbs,e,b+2):d.putFieldRawLongFrom(e[b+1],a.posAbs,e,b+2);return c-1}FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".isBridge.()Z",a);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".isVarArgs.()Z",
b);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".isSynthetic.()Z",c);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".getDeclaringClass.()L"+FyConst.FY_BASE_CLASS+";",d);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".getExceptionTypes.()[L"+FyConst.FY_BASE_CLASS+";",e);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".getModifiers.()I",g);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".getName.()L"+FyConst.FY_BASE_STRING+";",f);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+
".getParameterTypes.()[L"+FyConst.FY_BASE_CLASS+";",h);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".getReturnType.()L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){var d=a.getMethodFromMethodObject(b.stack[b.sp]);if(void 0===d)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");b.nativeReturnInt(a.getClassObjectHandle(a.lookupClass(d.returnClassName)));return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeZ.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+
";)Z",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeB.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+";)B",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeS.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+";)S",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeC.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+";)C",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeI.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+
";)I",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeF.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+";)F",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeD.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+";)D",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeJ.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+";)J",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeL.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+
";)L"+FyConst.FY_BASE_OBJECT+";",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".invokeV.(L"+FyConst.FY_BASE_OBJECT+";[L"+FyConst.FY_BASE_OBJECT+";)V",l);FyContext.registerStaticNH(FyConst.FY_REFLECT_METHOD+".getUniqueName.()L"+FyConst.FY_BASE_STRING+";",n);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".isBridge.()Z",a);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".isVarArgs.()Z",b);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".isSynthetic.()Z",c);
FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".getDeclaringClass.()L"+FyConst.FY_BASE_CLASS+";",d);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".getExceptionTypes.()[L"+FyConst.FY_BASE_CLASS+";",e);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".getModifiers.()I",g);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".getName.()L"+FyConst.FY_BASE_STRING+";",f);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".getParameterTypes.()[L"+FyConst.FY_BASE_CLASS+
";",h);FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".newInstance0.([L"+FyConst.FY_BASE_OBJECT+";)L"+FyConst.FY_BASE_OBJECT+";",function(a,b,c){var d=a.heap,e=b.stack,g=b.sp,f=g,h=e[g+1],k,g=a.getMethodFromMethodObject(e[g]);if(void 0===g)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method not found!");if(g.accessFlags&FyConst.FY_ACC_STATIC)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Method is not a constructor");var l=h?d.arrayLength(h):0;if(l!==g.parameterCount)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,
"Method's params count changed");k=d.allocate(g.owner);b.nativeReturnInt(k);b.nativeReturnInt(k);for(k=0;k<l;k++){var n=a.lookupClass(g.parameterClassNames[k]),m=d.getArrayInt(h,k);if(n.type===FyConst.TYPE_PRIMITIVE)switch(n.pType){case FyConst.Z:e[f++]=d.unwrapBoolean(m);break;case FyConst.B:e[f++]=d.unwrapByte(m);case FyConst.S:e[f++]=d.unwrapShort(m);case FyConst.C:e[f++]=d.unwrapChar(m);case FyConst.I:e[f++]=d.unwrapInt(m);case FyConst.F:e[f++]=d.unwrapFloatRaw(m);case FyConst.J:d.unwrapLong(m,
e,f),f+=2;case FyConst.D:d.unwrapDoubleRaw(m,e,f);default:throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Illegal parameter type "+n.pType);}else e[f++]=m}b.sp=f;return b.invokeVirtual(g,c-1)});FyContext.registerStaticNH(FyConst.FY_REFLECT_CONSTRUCTOR+".getUniqueName.()L"+FyConst.FY_BASE_STRING+";",n);var q=p("boolean",FyConst.Z),k=p("byte",FyConst.B),u=p("short",FyConst.S),H=p("char",FyConst.C),I=p("int",FyConst.I),A=p("float",FyConst.F),J=m("long",FyConst.J),E=m("double",FyConst.D);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+
".getName.()L"+FyConst.FY_BASE_STRING+";",function(a,b,c){c=a.heap;a=a.getFieldFromFieldObject(b.stack[b.sp]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");b.nativeReturnInt(c.literal(a.name))});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getUniqueName.()L"+FyConst.FY_BASE_STRING+";",function(a,b,c){var d=a.heap;a=a.getFieldFromFieldObject(b.stack[b.sp]);b.nativeReturnInt(d.literal(a.uniqueName));return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+
".isSynthetic.()Z",function(a,b,c){a=a.getFieldFromFieldObject(b.stack[b.sp]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");b.nativeReturnInt(a.accessFlags&FyConst.FY_ACC_SYNTHETIC?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".isEnumConstant.()Z",function(a,b,c){a=a.getFieldFromFieldObject(b.stack[b.sp]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");b.nativeReturnInt(a.accessFlags&
FyConst.FY_ACC_ENUM?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getModifiers.()I",function(a,b,c){a=a.getFieldFromFieldObject(b.stack[b.sp]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");b.nativeReturnInt(a.accessFlags);return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getDeclaringClass.()L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){c=a.getFieldFromFieldObject(b.stack[b.sp]);if(void 0===c)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,
"Field not found!");b.nativeReturnInt(a.getClassObjectHandle(c.owner))});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getType.()L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){c=a.getFieldFromFieldObject(b.stack[b.sp]);if(void 0===c)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");b.nativeReturnInt(a.getClassObjectHandle(c.type))});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getObject0.(L"+FyConst.FY_BASE_OBJECT+";)L"+FyConst.FY_BASE_OBJECT+";",function(a,
b,c){var d=a.heap,e=b.stack,g=b.sp,f=a.getFieldFromFieldObject(e[g]);if(void 0===f)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");if(f.type.type===FyConst.TYPE_PRIMITIVE)throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Field "+f.uniqueName+" is not an object or array");if(f.accessFlags&FyConst.FY_ACC_STATIC)f.accessFlags&FyConst.FY_ACC_FINAL&&f.constantValueData?b.nativeReturnInt(d.literalWithConstant(f.constantValueData)):b.nativeReturnInt(d.getStaticRaw(f.owner,f.posAbs));
else{var h=d.getObject(e[g+1]).clazz;if(!a.classLoader.canCast(h,f.owner))throw new FyException(FyConst.FY_EXCEPTION_ARGU,"Can't cast from "+h.name+" to "+f.owner.name);b.nativeReturnInt(d.getFieldRaw(e[g+1],f.posAbs))}return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getBoolean0.(L"+FyConst.FY_BASE_OBJECT+";)Z",q);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getByte0.(L"+FyConst.FY_BASE_OBJECT+";)B",k);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getShort0.(L"+
FyConst.FY_BASE_OBJECT+";)S",u);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getChar0.(L"+FyConst.FY_BASE_OBJECT+";)C",H);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getInt0.(L"+FyConst.FY_BASE_OBJECT+";)I",I);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getFloat0.(L"+FyConst.FY_BASE_OBJECT+";)F",A);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getLong0.(L"+FyConst.FY_BASE_OBJECT+";)J",J);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".getDouble0.(L"+FyConst.FY_BASE_OBJECT+
";)D",E);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setObject.(L"+FyConst.FY_BASE_OBJECT+";L"+FyConst.FY_BASE_OBJECT+";)V",function(a,b,c){var d=a.heap,e=b.stack;b=b.sp;a=a.getFieldFromFieldObject(e[b]);if(void 0===a)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field not found!");if(a.type.type===FyConst.TYPE_PRIMITIVE)throw new FyException(FyConst.FY_EXCEPTION_INCOMPAT_CHANGE,"Field "+a.uniqueName+" is primitive");a.accessFlags&FyConst.FY_ACC_STATIC?d.putStaticInt(a.type,
a.posAbs,e[b+2]):d.putFieldInt(e[b+1],a.posAbs,e[b+2]);return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setBoolean.(L"+FyConst.FY_BASE_OBJECT+";Z)V",r);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setByte.(L"+FyConst.FY_BASE_OBJECT+";B)V",r);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setShort.(L"+FyConst.FY_BASE_OBJECT+";S)V",r);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setChar.(L"+FyConst.FY_BASE_OBJECT+";C)V",r);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+
".setInt.(L"+FyConst.FY_BASE_OBJECT+";I)V",r);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setFloat.(L"+FyConst.FY_BASE_OBJECT+";F)V",r);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setLong.(L"+FyConst.FY_BASE_OBJECT+";J)V",s);FyContext.registerStaticNH(FyConst.FY_REFLECT_FIELD+".setDouble.(L"+FyConst.FY_BASE_OBJECT+";D)V",s);FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".isEnum.()Z",function(a,b,c){a=a.getClassFromClassObject(b.stack[b.sp]);b.nativeReturnInt(a.accessFlags&FyConst.FY_ACC_ENUM?
1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".getModifiers.()I",function(a,b,c){a=a.getClassFromClassObject(b.stack[b.sp]);b.nativeReturnInt(a.accessFlags);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".getNativeName.()L"+FyConst.FY_BASE_STRING+";",function(a,b,c){var d=a.getClassFromClassObject(b.stack[b.sp]),e=a.heap.allocate(a.lookupClass(FyConst.FY_BASE_STRING));b.nativeReturnInt(e);a.heap.fillString(e,d.name);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+
".getPrivateDeclaredMethods0.()[L"+FyConst.FY_BASE_OBJECT+";",function(a,b,c){for(var d=b.stack,e=b.sp,f=a.getClassFromClassObject(d[e]),g=a.heap,h=f.methods.length,d=d[e]=g.allocateArray(a.lookupClass(FyClassLoader.getArrayName(FyConst.FY_BASE_OBJECT)),h),e=0;e<h;e++)g.putArrayRaw(d,e,a.getMethodObjectHandle(f.methods[e]));b.nativeReturn(1);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".getPrivateDeclaredFields0.()[L"+FyConst.FY_BASE_OBJECT+";",function(a,b,c){for(var d=b.stack,
e=b.sp,f=a.getClassFromClassObject(d[e]),g=a.heap,h=f.fields.length,d=d[e]=g.allocateArray(FyClassLoader.getArrayName(FyConst.FY_BASE_OBJECT),h),e=0;e<h;e++)g.putArrayRaw(d,e,a.getFieldObjectHandle(f.fields[e]));b.nativeReturn(1);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".getComponentType.()L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){var d=a.getClassFromClassObject(b.stack[b.sp]);d.type===FyConst.TYPE_ARRAY?b.nativeReturnInt(a.getClassObjectHandle(d.contentClass)):b.nativeReturnInt(0);
return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".forName0.(L"+FyConst.FY_BASE_STRING+";Z)L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){var d=a.heap.getString(b.stack[b.sp]).replace(/\./g,"/"),d=a.lookupClass(d);b.nativeReturnInt(a.getClassObjectHandle(d));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".newInstance0.()L"+FyConst.FY_BASE_OBJECT+";",function(a,b,c){var d=b.stack,e=a.getClassFromClassObject(d[b.sp]),f=a.heap.allocate(e);b.nativeReturnInt(f);d[b.sp++]=f;return b.pushMethod(a.lookupMethodVirtual(e,
FyConst.FY_METHOD_INIT+".()V"),c)});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".isInstance.(L"+FyConst.FY_BASE_OBJECT+";)Z",function(a,b,c){var d=b.stack,e=b.sp,f=a.getClassFromClassObject(d[e]),d=a.heap.getObject(d[e+1]).clazz;b.nativeReturnInt(a.classLoader.canCast(d,f)?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".isAssignableFrom.(L"+FyConst.FY_BASE_CLASS+";)Z",function(a,b,c){var d=b.stack,e=b.sp,f=a.getClassFromClassObject(d[e]),d=a.getClassFromClassObject(d[e+
1]);b.nativeReturnInt(a.classLoader.canCast(d,f)?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".isInterface.()Z",function(a,b,c){a=a.getClassFromClassObject(b.stack[b.sp]);b.nativeReturnInt(a.accessFlags&FyConst.FY_ACC_INTERFACE?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".isArray.()Z",function(a,b,c){a=a.getClassFromClassObject(b.stack[b.sp]);b.nativeReturnInt(a.type===FyConst.TYPE_ARRAY?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+
".isPrimitive.()Z",function(a,b,c){a=a.getClassFromClassObject(b.stack[b.sp]);b.nativeReturnInt(a.type===FyConst.TYPE_PRIMITIVE?1:0);return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".getSuperclass.()L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){var d=a.getClassFromClassObject(b.stack[b.sp]).superClass;b.nativeReturnInt(void 0===d?0:a.getClassObjectHandle(d));return c-1});FyContext.registerStaticNH(FyConst.FY_BASE_CLASS+".getInterfaces.()[L"+FyConst.FY_BASE_CLASS+";",function(a,b,c){var d=
b.stack,e=b.sp,f=a.getClassFromClassObject(d[e]),g=a.lookupClass("[L"+FyConst.FY_BASE_CLASS+";");d[e]=a.heap.allocateArray(g,f.interfaces.length);for(var g=0,h=f.interfaces.length;g<h;g++){var k=a.getClassObjectHandle(f.interfaces[g]);a.heap.putArrayInt(d[e],g,k)}b.nativeReturn(1);return c-1});FyContext.registerStaticNH(FyConst.FY_REFLECT_ARRAY+".newInstance.(L"+FyConst.FY_BASE_CLASS+";[I)L"+FyConst.FY_BASE_OBJECT+";",function(a,b,c){for(var d=b.stack,e=b.sp,f=a.getClassFromClassObject(d[e]),g=a.heap,
h=f.name,k=g.arrayLength(d[e+1]),l=Array(k),m=0;m<k;m++)h=FyClassLoader.getArrayName(h),l[m]=g.getArrayInt(d[e+1],m);b.nativeReturnInt(g.multiNewArray(a.lookupArrayClass(f),k,l,0));return c-5})})();
(function(){var a=Math.log(10);FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".acos.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.acos(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".asin.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.asin(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".atan.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.atan(a));
return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".atan2.(DD)D",function(a,c,d){var e=c.sp,g=c.stack;a=FyPortable.ieee64ToDouble(g,e);e=FyPortable.ieee64ToDouble(g,e+2);c.nativeReturnDouble(Math.atan(a,e));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".cbrt.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.pow(a,1/3));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".ceil.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,
c.sp);c.nativeReturnDouble(Math.ceil(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".cos.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.cos(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".cosh.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);a=Math.exp(a);c.nativeReturnDouble(0.5*(a-1/a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".exp.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,
c.sp);c.nativeReturnDouble(Math.exp(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".expm1.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.exp(a)-1);return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".floor.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.floor(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".hypot.(DD)D",function(a,c,d){var e=c.sp,g=c.stack;a=FyPortable.ieee64ToDouble(g,
e);e=FyPortable.ieee64ToDouble(g,e+2);a=Math.abs(a);e=Math.abs(e);g=Math.min(a,e);a=Math.max(a,e);g/=a;c.nativeReturnDouble(a*Math.sqrt(1+g*g));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".IEEEremainder.(DD)D",function(a,c,d){var e=c.sp,g=c.stack;a=FyPortable.ieee64ToDouble(g,e);e=FyPortable.ieee64ToDouble(g,e+2);0===e?c.nativeReturnDouble(0/e):c.nativeReturnDouble(a-Math.floot(a/e)*e);return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".log.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,
c.sp);c.nativeReturnDouble(Math.log(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".log10.(D)D",function(b,c,d){b=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.log(b)/a);return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".log1p.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.log(a+1));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".pow.(DD)D",function(a,c,d){var e=c.sp,g=c.stack;a=FyPortable.ieee64ToDouble(g,
e);e=FyPortable.ieee64ToDouble(g,e+2);c.nativeReturnDouble(Math.pow(a,e));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".rint.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(a-Math.floor(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".signum.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);a!=a?c.nativeReturnDouble(0/0):c.nativeReturnDouble(0<a?1:0>a?-1:0);return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+
".signum.(F)F",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);a!=a?c.nativeReturnFloat(0/0):c.nativeReturnFloat(0<a?1:0>a?-1:0);return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".sin.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.sin(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".sinh.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);a=Math.exp(a);c.nativeReturnDouble((a-1/a)/2);return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+
".sqrt.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.sqrt(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".tan.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);c.nativeReturnDouble(Math.tan(a));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".tanh.(D)D",function(a,c,d){a=FyPortable.ieee64ToDouble(c.stack,c.sp);a=Math.exp(2*a);c.nativeReturnDouble((a-1)/(a+1));return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+
".ulp.(D)D",function(a,c,d){c.nativeReturnDouble(0);return d-1});FyContext.registerStaticNH(FyConst.FY_BASE_MATH+".ulp.(F)F",function(a,c,d){c.nativeReturnFloat(0);return d-1})})();
