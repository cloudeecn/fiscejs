<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>

<script type="text/javascript" src="fisce.min.js"></script>
<script type="text/javascript">
	var clazz = "com/cirnoworks/fisce/privat/Profile";
	var context = new FyContext();
	var t0 = performance.now();
</script>
<style type="text/css">
.fisce-data-iframe {
	position: absolute;
	width: 0px;
	height: 0px;
	overflow: hidden;
	border: none;
}
</style>

</head>
<body onload="startup();">
	<pre id="console">Loading...</pre>
	<script type="text/javascript">
		function startup() {
			if (window.console) {
				window.oldConsole = window.console;
			} else {
				window = oldConsole = {
					log : function() {
					}
				}
			}
			window.console = {
				log : function(param) {
					document.getElementById("console").appendChild(
							document.createTextNode(param + "\n"));
					window.oldConsole.log.apply(window.oldConsole, arguments);
				}
			}
			context
					.loadClassDefines(
							[ "http://latest.fisce.dev.cirnoworks.com" ],
							{
								success : function() {
									document.getElementById("console").innerHTML = "data loaded in "
											+ ((((performance.now() - t0) * 1000) | 0) / 1000)
											+ "ms\n";
									context.bootup(clazz);
									context
											.run({
												end : function() {
													console.log("ended");
												},
												panic : function(e) {
													console.log("panic!\n"
															+ e.message);
													console.log(e.cause.stack);
												}
											});
								},
								error : function(message) {
									console.log("error: " + message);
								},
								begin : function(url) {
									console.log("begin receive");
								},
								done : function(url) {
									console.log("done receive");
								}
							});
		}
	</script>
</body>
</html>
